define(["jquery", "bootstrap"], function() {
    Date.prototype.Format = function(e) {
        var t = {
            "M+": this.getMonth() + 1,
            "d+": this.getDate(),
            "h+": this.getHours(),
            "m+": this.getMinutes(),
            "s+": this.getSeconds(),
            "q+": Math.floor((this.getMonth() + 3) / 3),
            S: this.getMilliseconds()
        };
        if (/(y+)/.test(e)) e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        for (var a in t) if (new RegExp("(" + a + ")").test(e)) e = e.replace(RegExp.$1, RegExp.$1.length == 1 ? t[a] : ("00" + t[a]).substr(("" + t[a]).length));
        return e
    };
    String.prototype.trim = function() {
        return this.replace(/(^\s*)|(\s*$)/g, "")
    };
    String.prototype.ltrim = function() {
        return this.replace(/(^\s*)/g, "")
    };
    String.prototype.rtrim = function() {
        return this.replace(/(\s*$)/g, "")
    };
    (function(e) {
        if (e.browser) return;
        e.browser = {};
        e.browser.mozilla = false;
        e.browser.webkit = false;
        e.browser.opera = false;
        e.browser.msie = false;
        var t = navigator.userAgent;
        e.browser.name = navigator.appName;
        e.browser.fullVersion = "" + parseFloat(navigator.appVersion);
        e.browser.majorVersion = parseInt(navigator.appVersion, 10);
        var a, n, r;
        if ((n = t.indexOf("Opera")) != -1) {
            e.browser.opera = true;
            e.browser.name = "Opera";
            e.browser.fullVersion = t.substring(n + 6);
            if ((n = t.indexOf("Version")) != -1) e.browser.fullVersion = t.substring(n + 8)
        } else if ((n = t.indexOf("MSIE")) != -1) {
            e.browser.msie = true;
            e.browser.name = "Microsoft Internet Explorer";
            e.browser.fullVersion = t.substring(n + 5)
        } else if ((n = t.indexOf("Chrome")) != -1) {
            e.browser.webkit = true;
            e.browser.name = "Chrome";
            e.browser.fullVersion = t.substring(n + 7)
        } else if ((n = t.indexOf("Safari")) != -1) {
            e.browser.webkit = true;
            e.browser.name = "Safari";
            e.browser.fullVersion = t.substring(n + 7);
            if ((n = t.indexOf("Version")) != -1) e.browser.fullVersion = t.substring(n + 8)
        } else if ((n = t.indexOf("Firefox")) != -1) {
            e.browser.mozilla = true;
            e.browser.name = "Firefox";
            e.browser.fullVersion = t.substring(n + 8)
        } else if ((a = t.lastIndexOf(" ") + 1) < (n = t.lastIndexOf("/"))) {
            e.browser.name = t.substring(a, n);
            e.browser.fullVersion = t.substring(n + 1);
            if (e.browser.name.toLowerCase() == e.browser.name.toUpperCase()) {
                e.browser.name = navigator.appName
            }
        }
        if ((r = e.browser.fullVersion.indexOf(";")) != -1) e.browser.fullVersion = e.browser.fullVersion.substring(0, r);
        if ((r = e.browser.fullVersion.indexOf(" ")) != -1) e.browser.fullVersion = e.browser.fullVersion.substring(0, r);
        e.browser.majorVersion = parseInt("" + e.browser.fullVersion, 10);
        if (isNaN(e.browser.majorVersion)) {
            e.browser.fullVersion = "" + parseFloat(navigator.appVersion);
            e.browser.majorVersion = parseInt(navigator.appVersion, 10)
        }
        e.browser.version = e.browser.majorVersion
    })(jQuery);
    var base = {};
    base.$scope = {};
    base.IE8 = function() {
        if (!$.support.opacity) {
            return true
        } else {
            return false
        }
    };
    base.IE = function() {
        if (!$.support.opacity && !$.support.style && window.XMLHttpRequest == undefined) {
            return 6
        } else {
            if (!$.support.opacity && !$.support.style && window.window.XMLHttpRequest != undefined) {
                return 7
            } else {
                if (!$.support.opacity) {
                    return 8
                } else {
                    return 9
                }
            }
        }
    }();
    base.isIE = function() {
        if (document.all) {
            return true
        } else {
            return false
        }
    }();
    base.setProperty = function(e, t) {
        if (t) {
            if (t.cls) {
                $(e).addClass(t.cls.replace(/,/g, " "))
            }
            if (t.style) {
                $(e).attr("style", t.style.replace(/,/g, ";"))
            }
            if (t.id) {
                $(e).attr("id", t.id)
            }
            if (t.name) {
                $(e).attr("name", t.name)
            }
            if (self.attr) {
                $(self.attr).each(function(t, a) {
                    $(e).attr(a.name, a.value)
                })
            }
        }
    };
    base.getRandom = function(e, t) {
        return Math.round(Math.random() * (t - e) + e)
    };
    base.getRandomString = function(e) {
        e = e ? e : 32;
        var t = "ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";
        var a = t.length;
        var n = "";
        for (i = 0; i < e; i++) {
            n += t.charAt(Math.floor(Math.random() * a))
        }
        return n
    };
    base.ajax = function(e, t) {
        var a = {};
        t = t ? t : true;
        if (e) {
            a.params = e.params ? e.params : {};
            a.url = e.url ? e.url : "";
            a.async = e.async == false ? false : true;
            a.type = e.type ? e.type : "post";
            a.dataType = e.dataType ? e.dataType : "json";
            a.success = e.success ? e.success : null;
            a.error = e.error ? e.error : null;
            a.beforeSend = e.beforeSend ? e.beforeSend : null;
            a.complete = e.complete ? e.complete : null;
            a.timeout = e.timeout ? e.timeout : -1;
            a.ajaxObj = null;
            a.isConnect = a.isConnect == false ? false : true;
            a.contentType = e.contentType ? e.contentType : "application/json; charset=utf-8";
            if (a.dataType == "text") {
                a.type = "get"
            }
            a.connect = function() {
                a.ajaxObj = $.ajax({
                    type: a.type,
                    async: a.async,
                    url: a.url,
                    contentType: a.contentType,
                    data: function() {
                        if (a.type.toLowerCase() == "post") {
                            return JSON.stringify(a.params)
                        } else {
                            return a.params
                        }
                    }(),
                    dataType: a.dataType,
                    timeout: a.timeout,
                    success: function(e, t, n) {
                        if (a.success) {
                            a.success(e, t, n)
                        }
                    },
                    error: function(e, t, n) {
                        if (a.error) {
                            a.error()
                        }
                    },
                    beforeSend: function(e) {
                        if (a.beforeSend) {
                            a.beforeSend(e)
                        }
                    },
                    xhrFields: {
                        withCredentials: true
                    },
                    complete: function(e, t) {
                        if (a.complete) {
                            a.complete()
                        }
                    }
                });
                return a
            };
            a.stop = function() {
                a.ajaxObj.abort()
            };
            a.run = function() {
                a.connect()
            };
            if (t) {
                if (a.url) {
                    a.connect()
                }
            }
            return a
        }
    };
    base.ajax.load = function(e) {
        var t = base.ajax(e, false);
        t.dataType = "text";
        t.type = "get";
        t.errorText = e.errorText ? e.errorText : "资源加载出错,请联系管理员!";
        t.container = e.container ? e.container : null;
        t.error = function() {
            if (t.container) {
                base.bulletin(t.container, t.errorText)
            }
        };
        t.beforeSend = function() {
            if (t.container) {
                base.loading($(t.container))
            }
        };
        if (!t.url) {
            base.bulletin(t.container, t.errorText)
        } else {
            t.connect()
        }
        return t
    };
    base.bulletin = function(e, t) {
        $(e).html("<div style='display:table;width:100%;height:100%;text-align:center;'><div class='theme-bulletin'>" + t + "</div></div>")
    };
    base.loading = function(e) {
        $(e).html("<div class='ui-loading' style='display:table;width:100%;height:100%;text-align:center;'>" + "<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='font-size:24px;text-align:center;display: table-cell;vertical-align: middle;width:24px;height:24px;color:#aaa'></i></div>")
    };
    base.template = function(e) {
        var t = {};
        t.data = e.data ? e.data : null;
        t.container = e.container ? e.container : null;
        t.templateId = e.templateId ? e.templateId : null;
        t.callback = e.callback ? e.callback : null;
        t.loading = e.loading ? e.loading : false;
        t.helper = e.helper ? e.helper : null;
        if (t.data && t.container && t.templateId) {
            if (t.loading) {
                base.loading(t.container)
            }
            require(["template"], function(e) {
                var a = e.compile($("#" + t.templateId).html());
                e.registerHelper("null", function(e, t) {
                    if (!e || e == "") {
                        return t.fn(this)
                    } else {
                        return t.inverse(this)
                    }
                });
                e.registerHelper("ne", function(e, t, a) {
                    if (e != t) {
                        return a.fn(this)
                    } else {
                        return a.inverse(this)
                    }
                });
                e.registerHelper("e", function(e, t, a) {
                    if (e == t) {
                        return a.fn(this)
                    } else {
                        return a.inverse(this)
                    }
                });
                e.registerHelper("g", function(e, t, a) {
                    if (e > t) {
                        return a.fn(this)
                    } else {
                        return a.inverse(this)
                    }
                });
                e.registerHelper("ge", function(e, t, a) {
                    if (e >= t) {
                        return a.fn(this)
                    } else {
                        return a.inverse(this)
                    }
                });
                e.registerHelper("le", function(e, t, a) {
                    if (e <= t) {
                        return a.fn(this)
                    } else {
                        return a.inverse(this)
                    }
                });
                e.registerHelper("l", function(e, t, a) {
                    if (e < t) {
                        return a.fn(this)
                    } else {
                        return a.inverse(this)
                    }
                });
                if (t.helper && t.helper.length > 0) {
                    $(t.helper).each(function(t, a) {
                        e.registerHelper(a.name, a.event)
                    })
                }
                var n = a(t.data);
                $(t.container).html(n);
                if (t.callback) {
                    t.callback(t)
                }
            })
        }
    };
    base.modal = function(e) {
        if (!e) {
            e = {}
        }
        var t = {};
        t.container = e.container ? e.container : $("body");
        t.modalId = e.id ? e.id : "m" + base.getRandom(1e3, 9999);
        t.label = e.label ? e.label : "新窗口";
        t.background = e.background ? e.background : "#fff";
        t.modalLabelId = e.id + "label";
        t.style = e.style ? e.style : "";
        t.width = e.width ? e.width : null;
        t.visible = e.visible ? e.visible : false;
        t.center = e.center ? e.center : true;
        t.drag = e.drag ? e.drag : false;
        t.url = e.url ? e.url : null;
        t.height = e.height ? e.height : null;
        t.radius = e.radius ? e.radius : 5;
        t.contentStyle = e.contentStyle ? e.contentStyle : "";
        t.labelStyle = e.labelStyle ? e.labelStyle : "";
        t.modalEntity = {};
        t.modal = null;
        t.modalBody = null;
        t.modalDialog = null;
        t.modalContent = null;
        t.modalHeader = null;
        t.modalFooter = null;
        t.modalOption = e.modalOption ? e.modalOption : {};
        t.callback = e.callback ? e.callback : null;
        t.customScroll = e.customScroll ? e.customScroll : true;
        t.context = e.context ? e.context : "";
        t.drag = e.drag ? e.drag : false;
        t.rebuilding = e.rebuilding ? e.rebuilding : false;
        t.textAlign = e.textAlign?e.textAlign:"";

        t.create = function() {
            if ($("#" + t.modalId).length > 0) {
                if (t.rebuilding) {
                    $("#" + t.modalId).remove();
                    t.createModal()
                } else {
                    t.modal = $("#" + t.modalId);
                    t.setModal();
                    t.modalDialog = $("#" + t.modalId).find(".modal-dialog");
                    t.setModalDialog();
                    t.modalContent = $("#" + t.modalId).find(".modal-content");
                    t.setModalContent();
                    t.modalHeader = $("#" + t.modalId).find(".modal-header");
                    t.setModalHeader();
                    t.modalBody = $("#" + t.modalId).find(".modal-body");
                    t.setModalBody();
                    t.modalFooter = $("#" + t.modalId).find(".modal-footer");
                    t.setModalFooter()
                }
            } else {
                t.createModal()
            }
            if (!t.visible) {
                t.show()
            }
        };
        t.createModal = function() {
            t.modal = document.createElement("div");
            $(t.container).append(t.modal);
            t.setModal();
            t.modalDialog = document.createElement("div");
            $(t.modal).append(t.modalDialog);
            t.setModalDialog();
            t.modalContent = document.createElement("div");
            $(t.modalDialog).append(t.modalContent);
            t.setModalContent();
            t.modalHeader = document.createElement("div");
            $(t.modalContent).append(t.modalHeader);
            t.setModalHeader();
            t.modalBody = document.createElement("div");
            $(t.modalContent).append(t.modalBody);
            t.setModalBody();
            t.modalFooter = document.createElement("div");
            $(t.modalContent).append(t.modalFooter);
            t.setModalFooter()
        };
        t.setModal = function() {
            $(t.modal).attr("id", t.modalId);
            $(t.modal).attr("class", "modal fade");
            $(t.modal).attr("role", "dialog");
            $(t.modal).attr("tabindex", "-1");
            $(t.modal).attr("aria-labelledby", t.modalId + "Label");
            if (t.visible) {
                $(t.modal).attr("aria-hidden", "true")
            } else {
                $(t.modal).attr("aria-hidden", "false")
            }
            if (t.cls) {
                $(t.modal).attr("class", e.cls.replace(/,/g, " "))
            }
            if (t.style) {
                $(t.modal).attr("style", e.style.replace(/,/g, ";"))
            }
        };
        t.setModalDialog = function() {
            $(t.modalDialog).attr("class", "modal-dialog");
            if (t.width) {
                $(t.modalDialog).css("width", t.width)
            }
            if (t.background) {
                $(t.modalDialog).css("background", t.background)
            }
            $(t.modalDialog).css("border-radius", t.radius)
        };
        t.setModalContent = function() {
            $(t.modalContent).attr("class", "modal-content");
            $(t.modalContent).css("border", "1px solid #ccc");
            $(t.modalContent).css("border-radius", t.radius)
        };
        t.setModalHeader = function() {
            $(t.modalHeader).attr("class", "modal-header");
            if (t.drag) {
                require(["jqueryUI"], function() {
                    $(t.modalDialog).draggable({
                        handle: ".modal-header",
                        cursor: "move",
                        refreshPositions: false
                    });
                    $(t.modalHeader).css("cursor", "move")
                })
            }
            $(t.modalHeader).html("<button class='close' data-dismiss='modal' aria-hidden='true'><i class='fa fa-remove' style='font-weight:normal;font-size:16px;'></i></button><h4 class='modal-title'  id='" + t.modalId + "Label'>" + t.label + "</h4>");
            if (t.labelStyle) {
                $(t.modalHeader).find("h4").attr("style", t.labelStyle.replace(/,/g, ";"))
            }
        };
        t.setModalBody = function() {
            $(t.modalBody).attr("class", "modal-body");
            if (t.height && t.height > 0) {
                $(t.modalBody).css("height", t.height);
                $(t.modalBody).css("overflow", "auto")
            }
            if (t.contentStyle) {
                $(t.modalBody).attr("style", t.contentStyle.replace(/,/g, ";"))
            }
        };
        t.setModalFooter = function() {
            $(t.modalFooter).attr("class", "modal-footer");
            $(t.modalFooter).attr("style",t.textAlign);
            if (e.buttons && e.buttons.length > 0) {
                $(e.buttons).each(function(e, a) {
                    a.container = $(t.modalFooter);
                    base.form.button(a)
                })
            }
        };
        t.show = function() {
            $(t.modal).on("show.bs.modal", function() {
                t.loadContext();
                if (t.showEvent) {
                    t.showEvent()
                }
            });
            $(t.modal).on("shown.bs.modal", function() {
                if (t.shownEvent) {
                    t.shownEvent()
                }
            });
            $(t.modal).on("hidden.bs.modal", function() {
                $(t.modal).remove()
            });
            t.modalOption.show = true;
            t.modalOption.center = t.center;
            $(t.modal).modal(t.modalOption)
        };
        t.hide = function() {
            $(t.modal).on("hide.bs.modal", function() {
                if (t.hideEvent) {
                    t.hideEvent()
                }
            });
            $(t.modal).on("hidden.bs.modal", function() {
                if (t.hiddenEvent) {
                    t.hiddenEvent()
                }
                $(t.modal).remove()
            });
            $(t.modal).modal("hide")
        };
        t.loadContext = function(a) {
            if (!a) {
                a = e
            }
            $(t.modalBody).html("");
            if (a.context) {
                $(t.modalBody).html(a.context);
                if (t.callback) {
                    t.callback(t)
                }
            } else if (a.url) {
                base.ajax({
                    url: a.url,
                    dataType: "text",
                    success: function(e) {
                        $(t.modalBody).html(e);
                        if (t.callback) {
                            t.callback(t)
                        }
                        if (t.customScroll) {
                            base.scroll({
                                container: $(t.modalBody)
                            })
                        }
                    },
                    beforeSend: function() {
                        base.loading(t.modalBody)
                    }
                })
            }
        };
        t.create();
        return t
    };
    base.glass = function(e) {
        if (base.isIE) {
            if (base.IE <= 8) {
                return
            }
        }
        var t = {};
        t.radius = e.radius ? e.radius : 15;
        t.element = e.element ? e.element : null;
        t.canvas = null;
        t.img = e.img ? e.img : null;
        var a = new Image;
        $(a).attr("src", $(t.img).attr("src"));
        t.fixHeight = e.fixHeight ? e.fixHeight : 0;
        t.width = a.width ? a.width : $(t.element).width();
        t.height = a.height ? a.height : $(t.element).height();
        t.top = e.top ? e.top : $(t.element).offset().top;
        t.left = e.left ? e.left : $(t.element).offset().left;
        t.x = e.x ? e.x : 0;
        t.y = e.y ? e.y : 0;
        t.cls = e.cls ? e.cls : null;
        t.Mu = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];
        t.Sh = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];
        t.BlurStack = function() {
            this.r = 0;
            this.g = 0;
            this.b = 0;
            this.a = 0;
            this.next = null
        };
        t.draw = function() {
            var e = $(t.element).width();
            var a = $(t.element).height();
            $(t.canvas).css("width", e);
            $(t.canvas).css("height", a);
            $(t.canvas).css("left", t.left);
            $(t.canvas).css("top", t.top);
            $(t.canvas).attr("width", e);
            $(t.canvas).attr("height", a);
            $(t.canvas).css("position", "absolute");
            if (t.cls) {
                $(t.canvas).addClass(t.cls)
            }
            var n = 0;
            if ($(t.element).css("z-index")) {
                n = Number($(t.element).css("z-index").split("px")[0])
            }
            $(t.canvas).css("zIndex", n + 1);
            var r = t.canvas.getContext("2d");
            r.clearRect(0, 0, e, a);
            var i = 0;
            if ($(window).height() < document.documentElement.scrollHeight) {
                i = a + Math.floor(window.screen.availHeight / t.height * a) + 10
            } else {
                i = a + Math.floor(window.screen.availHeight / t.height * a)
            }
            var o = t.width;
            r.drawImage($(t.img)[0], t.left, t.top, o, i, t.x, t.y, e, a);
            t.stackBlurCanvasRGBA(0, 0, e, a)
        };
        t.create = function() {
            t.canvas = document.createElement("canvas");
            $(t.element).parent().append(t.canvas);
            t.draw()
        };
        t.stackBlurCanvasRGBA = function(e, a, n, r) {
            var i = t.canvas.getContext("2d");
            var o;
            try {
                try {
                    o = i.getImageData(e, a, n, r)
                } catch (t) {
                    try {
                        netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
                        o = i.getImageData(e, a, n, r)
                    } catch (e) {
                        throw new Error("unable to access local image data: " + e);
                        return
                    }
                }
            } catch (e) {
                throw new Error("unable to access image data: " + e)
            }
            var l = o.data;
            var c, s, d, u, f, p, m, b, h, g, $, v, y, k, x, w, C, E, S, B, I, O, A, D;
            var P = t.radius + t.radius + 1;
            var N = n << 2;
            var M = n - 1;
            var T = r - 1;
            var z = t.radius + 1;
            var j = z * (z + 1) / 2;
            var F = new BlurStack;
            var L = F;
            for (d = 1; d < P; d++) {
                L = L.next = new BlurStack;
                if (d == z) var R = L
            }
            L.next = F;
            var H = null;
            var G = null;
            m = p = 0;
            var W = mul_table[t.radius];
            var q = shg_table[t.radius];
            for (s = 0; s < r; s++) {
                w = C = E = S = b = h = g = $ = 0;
                v = z * (B = l[p]);
                y = z * (I = l[p + 1]);
                k = z * (O = l[p + 2]);
                x = z * (A = l[p + 3]);
                b += j * B;
                h += j * I;
                g += j * O;
                $ += j * A;
                L = F;
                for (d = 0; d < z; d++) {
                    L.r = B;
                    L.g = I;
                    L.b = O;
                    L.a = A;
                    L = L.next
                }
                for (d = 1; d < z; d++) {
                    u = p + ((M < d ? M : d) << 2);
                    b += (L.r = B = l[u]) * (D = z - d);
                    h += (L.g = I = l[u + 1]) * D;
                    g += (L.b = O = l[u + 2]) * D;
                    $ += (L.a = A = l[u + 3]) * D;
                    w += B;
                    C += I;
                    E += O;
                    S += A;
                    L = L.next
                }
                H = F;
                G = R;
                for (c = 0; c < n; c++) {
                    l[p + 3] = A = $ * W >> q;
                    if (A != 0) {
                        A = 255 / A;
                        l[p] = (b * W >> q) * A;
                        l[p + 1] = (h * W >> q) * A;
                        l[p + 2] = (g * W >> q) * A
                    } else {
                        l[p] = l[p + 1] = l[p + 2] = 0
                    }
                    b -= v;
                    h -= y;
                    g -= k;
                    $ -= x;
                    v -= H.r;
                    y -= H.g;
                    k -= H.b;
                    x -= H.a;
                    u = m + ((u = c + t.radius + 1) < M ? u : M) << 2;
                    w += H.r = l[u];
                    C += H.g = l[u + 1];
                    E += H.b = l[u + 2];
                    S += H.a = l[u + 3];
                    b += w;
                    h += C;
                    g += E;
                    $ += S;
                    H = H.next;
                    v += B = G.r;
                    y += I = G.g;
                    k += O = G.b;
                    x += A = G.a;
                    w -= B;
                    C -= I;
                    E -= O;
                    S -= A;
                    G = G.next;
                    p += 4
                }
                m += n
            }
            for (c = 0; c < n; c++) {
                C = E = S = w = h = g = $ = b = 0;
                p = c << 2;
                v = z * (B = l[p]);
                y = z * (I = l[p + 1]);
                k = z * (O = l[p + 2]);
                x = z * (A = l[p + 3]);
                b += j * B;
                h += j * I;
                g += j * O;
                $ += j * A;
                L = F;
                for (d = 0; d < z; d++) {
                    L.r = B;
                    L.g = I;
                    L.b = O;
                    L.a = A;
                    L = L.next
                }
                f = n;
                for (d = 1; d <= t.radius; d++) {
                    p = f + c << 2;
                    b += (L.r = B = l[p]) * (D = z - d);
                    h += (L.g = I = l[p + 1]) * D;
                    g += (L.b = O = l[p + 2]) * D;
                    $ += (L.a = A = l[p + 3]) * D;
                    w += B;
                    C += I;
                    E += O;
                    S += A;
                    L = L.next;
                    if (d < T) {
                        f += n
                    }
                }
                p = c;
                H = F;
                G = R;
                for (s = 0; s < r; s++) {
                    u = p << 2;
                    l[u + 3] = A = $ * W >> q;
                    if (A > 0) {
                        A = 255 / A;
                        l[u] = (b * W >> q) * A;
                        l[u + 1] = (h * W >> q) * A;
                        l[u + 2] = (g * W >> q) * A
                    } else {
                        l[u] = l[u + 1] = l[u + 2] = 0
                    }
                    b -= v;
                    h -= y;
                    g -= k;
                    $ -= x;
                    v -= H.r;
                    y -= H.g;
                    k -= H.b;
                    x -= H.a;
                    u = c + ((u = s + z) < T ? u : T) * n << 2;
                    b += w += H.r = l[u];
                    h += C += H.g = l[u + 1];
                    g += E += H.b = l[u + 2];
                    $ += S += H.a = l[u + 3];
                    H = H.next;
                    v += B = G.r;
                    y += I = G.g;
                    k += O = G.b;
                    x += A = G.a;
                    w -= B;
                    C -= I;
                    E -= O;
                    S -= A;
                    G = G.next;
                    p += n
                }
            }
            i.putImageData(o, e, a)
        };
        t.create();
        return t
    };
    base.spreader = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.data = e.data ? e.data : null;
        t.step = e.step ? e.step : 0;
        t.mapOption = e.mapOption ? e.mapOption : null;
        t.radius = e.radius ? e.radius : .05;
        t.offset = e.offset ? e.offset : 10;
        t.origin = e.origin ? e.origin : [0, 0];
        t.mapData = {
            type: "FeatureCollection",
            features: [],
            UTF8Encoding: true
        };
        t.markLineData = [];
        t.markPointData = [];
        t.geoCoord = {};
        t.originId = null;
        t.element = null;
        t.isMain = e.isMain ? e.isMain : true;
        t.create = function() {
            if (t.data && t.data.length > 0) {
                if (t.isMain) {
                    t.element = t.container
                } else {
                    t.element = document.createElement("div");
                    $(t.container).append(t.element)
                }
                t.setData(t.data);
                t.draw()
            }
            return t
        };
        t.draw = function() {
            if (t.mapOption) {
                var a = base.echartsOld({
                    container: t.element,
                    type: "map",
                    style: "width:100%;height:100%",
                    option: t.mapOption,
                    mapData: t.mapData,
                    mapName: "service",
                    clickEvent: e.clickEvent ? e.clickEvent : null,
                    hoverEvent: e.hoverEvent ? e.hoverEvent : null
                })
            }
        };
        t.getPosition = function(e, a, n, r) {
            if (!e || !a || !n) {
                return []
            }
            var r = r ? r : t.radius;
            var i = Number(e) + Math.sin(2 * Math.PI / 360 * n) * r;
            var o = Number(a) + Math.cos(2 * Math.PI / 360 * n) * r;
            var l = [i, o];
            return l
        };
        t.setData = function(e, a) {
            $(e).each(function(n, r) {
                var i = r.id;
                var o = [];
                var l = 0;
                var c = 0;
                if (a) {
                    if (a.cp[0] == t.origin[0] && a.cp[1] == t.origin[1]) {
                        l = t.step > 0 ? 360 / t.step * (n + 1) : 360 / e.length * (n + 1);
                        c = t.radius
                    } else {
                        var s = a.angle;
                        l = s / 1.5 + 10 * (n + 1);
                        c = t.radius
                    }
                    o = t.getPosition(a.cp[0], a.cp[1], l, c)
                } else {
                    o = t.origin
                }
                if (t.originId) {
                    t.originId = i
                }
                t.geoCoord[r.name] = o;
                if (a) {
                    t.markLineData.push([{
                        name: r.name
                    }, {
                        name: a.data.name,
                        value: r.value
                    }]);
                    t.markPointData.push({
                        name: r.name,
                        value: r.value
                    })
                } else {
                    t.markLineData.push([{
                        name: r.name
                    }, {
                        name: t.data[0].name,
                        value: r.value
                    }])
                }
                var d = {
                    type: "Feature",
                    id: i,
                    properties: {
                        name: r.name,
                        cp: o,
                        childNum: 1
                    },
                    geometry: {
                        type: "Polygon",
                        coordinates: ["@@DB@DF@@@B@@@@@@@B@B@@@@@@@@@@@D@BAB@@@B@B@@@B@B@BA@@B@B@@BD@@F@B@@@B@@@@@B@B@B@@@B@@@@@@@FD@@CA@@AD@BC@@@A@EB@@CD@@AB@B@R@@@@@@@@@@@@ED@@@@@D@@@@@B@@E@@@BA@@A@@@A@@@A@@@@@@@@@@@A@@@CB@@@@@@@@@@AA@@@@@@@@AF@B@@@B@@@@@@@@@@@@@@AB@@BD@@@@@@@@@A@@@@B@@AB@@@@B@@@@@FBBA@CD@@EAA@@@A@@@@@@B@@@@@@@@@@@BB@@@@B@@@@@@@B@D@@@@@@@@@@@@AB@@@A@@@@A@A@@@@@@@@A@@@AA@@@A@@@A@A@@@@@AA@@A@@@E@@@@@@@A@C@@@@@@@@@@@E@@@@CB@@@@A@@@@@A@AA@@@@@@@@@BA@@@A@@A@@@BE@@IBE@G@C@C@@@@BC@A@@@C@C@A@C@A@A@@B@@@@BB@@@B@B@@@B@B@@@B@B@B@B@B@@@D@@CA@C@@AB@@@@@@@@C@@@A@@@EH@@AD@@@@@@@@AC@@C@@A@A@AB@@@@A@@@A@@AC@@ABG@A@@@@BE@C@A@@@@@AAAAA@@@A@C@@@@@@AA@@@@@@C@KBO@C@@@C@A@@@A@AAA@@@E@@@E@@CD@@@@@@A@@@@@C@@@@B@@AA@@C@@@@@@A@@@A@BGA@@@@@A@@A@@@@@@C@C@CB@@@@C@@@A@@@A@A@@@@@A@@@@@A@@AI@@@B@A@@B@B@B@@@@@@@B@@A@@@@A@@AB@BA@A@@@@@@DE@@@@@@B@@@BEA@@A@A@AAA@A@@@@@A@@B@@@@A@@@@@A@@@@@@@@@B@@B@@@@B@@@@@@@@@B@@D@@@DJ@B@D@@@@@H@NB@B@B@@@L@@@B@@@BAH@J@J@F@@@@@@A@@@A@@@@B@@@@@D@B@JG@@BB@@B@@@@@DA@@@@@@B@@@@B@AD@@@@@B@NJ@@B@@@@@@@@@@@@F@AJ@@@@C@AX@@@@@@AB@@A@@F@N@NMA@F@B"],
                        encodeOffsets: [
                            [119181, 40920]
                        ]
                    }
                };
                t.mapData.features.push(d);
                if (r.items && r.items.length > 0) {
                    var u = {
                        cp: o,
                        data: r,
                        angle: l
                    };
                    t.setData(r.items, u)
                }
            });
            t.mapOption.series[0].geoCoord = t.geoCoord;
            t.mapOption.series[0].markLine.data = t.markLineData;
            t.mapOption.series[0].markPoint.data = t.markPointData
        };
        t.create();
        return t
    };
    base.echartsOld = function(e) {
        var t = {};
        t.container = null;
        t.dataOption = null;
        t.parentOption = e.parentOption;
        t.chart = null;
        t.data = null;
        t.echarts = null;
        t.theme = null;
        t.chartEle = null;
        e.seriesType = e.seriesType ? e.seriesType : "map";
        t.element = document.createElement("div");
        $(t.element).addClass("echarts-chart");
        if (e.show) {
            $(t.element).hide()
        } else {
            $(t.element).show()
        }
        $(e.container).append(t.element);
        base.setProperty(t.element, e);
        t.mapSelectFuc = function(a) {
            if (e.seriesType == "map") {
                a.on("mapselectchanged", function(a) {
                    e.mapSelectedEvent(a, t)
                })
            } else {
                a.on("click", function(a) {
                    e.mapSelectedEvent(a, t)
                })
            }
        };
        t.clickFuc = function(a) {
            require(["echartsConfig"], function(n) {
                a.on("click", function(a) {
                    e.clickEvent(a, t)
                })
            })
        };
        t.hoverFuc = function(t) {
            require(["echartsConfig"], function(a) {
                t.on("hover", function(t) {
                    e.hoverEvent(t)
                })
            })
        };
        t.create = function() {
            if (e.option) {
                e.dataOption = e.option;
                if (e.setOptionDataEvent) {
                    e.setOptionDataEvent(e)
                }
                if (e.type == "map") {
                    require(["echarts2.0"], function() {
                        if (e.mapData && e.mapName) {
                            echarts.util.mapData.params.params[e.mapName] = {
                                getGeoJson: function(t) {
                                    if (typeof e.mapData == "string") {
                                        $.getJSON(e.mapData, function(e) {
                                            t(echarts.util.mapData.params.decode(e))
                                        })
                                    } else {
                                        t(echarts.util.mapData.params.decode(e.mapData))
                                    }
                                }
                            };
                            t.echarts = echarts;
                            t.chart = t.echarts.init(t.element, t.theme);
                            t.chartEle = t.chart.setOption(e.dataOption, true);
                            $(window).on("resize", function() {
                                t.reDraw()
                            });
                            if (e.mapSelectedEvent) {
                                t.mapSelectFuc(t.chart)
                            }
                            if (e.clickEvent) {
                                t.clickFuc(t.chart)
                            }
                            if (e.hoverEvent) {
                                t.hoverFuc(t.chart)
                            }
                        } else {
                            t.echarts = echarts;
                            t.chart = t.echarts.init(t.element, t.theme);
                            t.chartEle = t.chart.setOption(e.dataOption, true);
                            $(window).on("resize", function() {
                                t.reDraw()
                            });
                            if (e.mapSelectedCallback) {
                                t.mapSelectFuc(t.chart)
                            }
                            if (e.clickCallback) {
                                t.clickFuc(t.chart)
                            }
                            if (e.hoverCallback) {
                                t.hoverFuc(t.chart)
                            }
                        }
                    })
                } else {
                    require(["echarts.min", e.theme], function(a, n) {
                        t.echarts = a;
                        t.theme = n;
                        t.chart = t.echarts.init(t.element, t.theme);
                        t.chartEle = t.chart.setOption(e.dataOption, true);
                        $(window).on("resize", function() {
                            t.reDraw()
                        });
                        if (e.mapSelectedCallback) {
                            t.mapSelectFuc(t.chart)
                        }
                        if (e.clickCallback) {
                            t.clickFuc(t.chart)
                        }
                        if (e.hoverCallback) {
                            t.hoverFuc(t.chart)
                        }
                    })
                }
            }
        };
        t.setChartOption = function(t) {
            e.dataOption = t
        };
        t.getChartOption = function() {
            return e.dataOption
        };
        t.refresh = function(a) {
            t.setChartOption(a);
            t.chart.setOption(e.dataOption, true)
        };
        t.reDraw = function() {
            t.chart = t.echarts.init(t.element, t.theme);
            t.chart.setOption(e.dataOption, true);
            if (e.mapSelectedEvent) {
                t.mapSelectFuc(t.chart)
            }
        };
        t.create();
        return t
    };
    base.carousel = function(e) {
        var t = {};
        if (!e) {
            return
        } else {
            t.container = $(e.container) ? $(e.container) : null;
            if (!e || !t.container) {
                return
            }
            t.index = 0;
            t.data = e.data ? e.data : null;
            t.remoteData = e.remoteData ? e.remoteData : null;
            t.step = e.step ? e.step : 4;
            t.interval = e.interval ? e.interval : false;
            t.carouselBody = $(t.container).find(".carousel-inner")
        }
        t.setCarousel = function() {
            if (e.setCarouselEvent) {
                e.setCarouselEvent(t)
            }
        };
        t.slid = function() {
            if (e.slidEvent) {
                $(t.container).on("slid.bs.carousel", function() {
                    e.slidEvent(t)
                })
            }
        };
        t.slide = function() {
            if (e.slideEvent) {
                $(t.container).on("slide.bs.carousel", function() {
                    e.slideEvent(t)
                })
            }
        };
        t.next = function() {
            $(t.container).carousel("next")
        };
        t.prev = function() {
            $(t.container).carousel("prev")
        };
        t.drawCarousel = function() {
            if (e.slideEvent) {
                $(t.container).on("slide.bs.carousel", function() {
                    e.slideEvent(t)
                })
            }
            if (t.data) {
                $(t.container).carousel({
                    interval: t.interval
                })
            }
        };
        t.create = function() {
            base.setProperty(t.carouselBody, e);
            t.slid();
            t.slide();
            t.drawCarousel();
            t.setCarousel();
            return t
        };
        t.create();
        return t
    };
    base.highCharts = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.chartOption = e.chartOption ? e.chartOption : null;
        t.theme = e.theme ? e.theme : "dark";
        t.callback = e.callback ? e.callback : null;
        t.element = null;
        t.isMain = e.isMain ? e.isMain : true;
        t.create = function() {
            if (t.container && t.chartOption) {
                if (t.isMain) {
                    t.element = t.container
                } else {
                    t.element = document.createElement("div");
                    $(t.container).append(t.element)
                }
                base.setProperty(t.element, e);
                if (t.callback) {
                    $(t.element).highcharts(t.chartOption, t.callback)
                } else {
                    $(t.element).highcharts(t.chartOption)
                }
            }
            return t
        };
        t.create();
        return t
    };
    base.progress = function(e) {
        var t = {};
        t.element = null;
        t.container = e.container ? e.container : null;
        t.data = e.data.replace("/g", "%");
        t.data = Number(t.data) ? Number(t.data) : 0;
        t.animate = e.animate ? e.animate : true;
        t.progressColor = e.progressColor ? e.progressColor : "#0298f7";
        t.bgColor = e.bgColor ? e.bgColor : "#111";
        t.radius = e.radius ? e.radius : 5;
        t.label = null;
        t.height = e.height ? e.height : 9;
        t.progress = null;
        t.labelColor = e.labelColor ? e.labelColor : "#fff";
        t.progressLine = null;
        t.timer = e.timer ? e.timer : 1e3;
        t.create = function() {
            $(t.container).css("height", t.height);
            $(t.container).css("float", "left");
            $(t.container).html("");
            if (!e.label) {
                t.setLabel()
            } else {
                if (e.label.show || e.label.show == "undefined") t.setLabel()
            }
            t.setProgress();
            base.setProperty(t.element, e);
            return t
        };
        t.setLabel = function() {
            t.label = document.createElement("div");
            $(t.label).addClass("progressLabel");
            $(t.label).css("text-align", "center");
            $(t.label).css("position", "relative");
            $(t.label).css("height", t.height);
            $(t.label).css("z-index", 3);
            if (t.height > 9) {
                $(t.label).css("top", t.height - 9)
            } else {
                $(t.label).css("top", -(9 - t.height + 3))
            }
            $(t.label).css("color", t.labelColor);
            $(t.label).css("font-size", t.height);
            $(t.label).html(0 + "%");
            $(t.container).append(t.label)
        };
        t.progressGlass = null;
        t.setProgressGlass = function() {
            t.progressGlass = document.createElement("div");
            $(t.progressGlass).addClass("progressGlass");
            $(t.progressGlass).css("background-color", "rgba(255,255,255,0.35)");
            $(t.progressGlass).css("height", t.height * .4);
            $(t.progressGlass).css("position", "absolute");
            $(t.progressGlass).css("border-radius", t.radius);
            $(t.progressGlass).css("left", 2);
            $(t.progressGlass).css("right", 2);
            $(t.progressGlass).css("top", 1);
            $(t.progress).append(t.progressGlass)
        };
        t.setProgress = function() {
            t.progress = document.createElement("div");
            $(t.progress).css("border-radius", t.radius);
            $(t.progress).css("width", "100%");
            $(t.progress).css("position", "relative");
            $(t.progress).css("z-index", 1);
            $(t.progress).css("top", -6);
            $(t.progress).css("background", t.bgColor);
            $(t.progress).css("padding", 1);
            $(t.progress).css("height", t.height);
            $(t.progress).css("font-size", "13px");
            $(t.progress).css("box-shadow", "0 0 5px rgba(0,0,0,0.7)");
            $(t.container).append(t.progress);
            if (!base.IE8()) {
                t.setProgressGlass()
            }
            t.setProgressLine()
        };
        t.clear = function() {
            $(t.progressLine).css("width", 0)
        };
        t.timeoutFuc = null;
        t.animate = function() {
            if (t.animate) {
                $(t.progressLine).css("width", 0);
                var e = 0;
                t.timeoutFuc = window.setInterval(function() {
                    e++;
                    $(t.label).html(e + "%");
                    if (e >= t.data) {
                        window.clearInterval(t.timeoutFuc)
                    }
                }, t.timer / t.data);
                $(t.progressLine).animate({
                    width: $(t.progress).width() * (t.data / 100)
                }, t.timer)
            } else {
                $(t.label).html(t.data + "%");
                $(t.progressLine).css("width", $(t.progress).width() * (t.data / 100))
            }
        };
        t.setProgressLine = function() {
            t.progressLine = document.createElement("div");
            $(t.progressLine).addClass("progressLine");
            $(t.progressLine).css("border-radius", t.radius);
            if (jQuery.isArray(t.progressColor)) {
                var e = null;
                var a = 0;
                var n = 0;
                $(t.progressColor).each(function(r, i) {
                    if (i.split(":").length > 1) {
                        a = n;
                        n = i.split(":")[1]
                    } else {
                        a = n;
                        n = Math.round(100 / t.progressColor.length * (r + 1))
                    }
                    if (t.data >= a && t.data < n) {
                        e = i
                    }
                });
                if (e) {
                    var r = e.split(":")[0];
                    $(t.progressLine).css("background", r);
                    $(t.progressLine).css("box-shadow", "0 0 15px " + r)
                }
            } else {
                $(t.progressLine).css("background", t.progressColor)
            }
            $(t.progressLine).css("padding", 0);
            $(t.progressLine).css("height", "100%");
            $(t.progress).append(t.progressLine);
            t.animate()
        };
        t.create();
        return t
    };
    base.roundLoader = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.time = e.time ? e.time : null;
        t.showPercentage = e.showPercentage ? e.showPercentage : false;
        t.element = null;
        t.value = t.value ? t.value : 0;
        t.create = function() {
            if (base.IE8()) {
                return
            }
            if (e && t.container) {
                require(["radialIndicator"], function() {
                    base.setProperty(t.element, e);
                    t.set()
                })
            }
            return t
        };
        t.set = function() {
            if (t.time) {
                window.setInterval(function() {
                    if (t.value < 100) {
                        t.value = t.value + 1
                    } else {
                        t.value = 0;
                        if (e.drawEvent) {
                            e.drawEvent(t)
                        }
                    }
                    t.draw()
                }, t.time / 100)
            } else {
                t.draw()
            }
        };
        t.draw = function() {
            $(t.container).html("");
            t.element = $(t.container).radialIndicator({
                radius: 12,
                showPercentage: t.showPercentage,
                displayNumber: false,
                barWidth: 2.5,
                roundCorner: true,
                barBgColor: "rgba(0,0,0,0)",
                barColor: "#20c6fc",
                shadowColor: "#20c6fc",
                shadowRadius: 5
            }).data("radialIndicator");
            t.element.value(t.value)
        };
        t.create();
        return t
    };
    base.scroll = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.topEvent = e.topEvent ? e.topEvent : null;
        t.bottomEvent = e.bottomEvent ? e.bottomEvent : null;
        t.scrollEvent = e.scrollEvent ? e.scrollEvent : null;
        t.xScroll = e.xScroll ? e.xScroll : false;
        t.callback = e.callback ? e.callback : null;
        t.scrollOption = {
            mouseWheel: true,
            scrollInertia: 500
        };
        t.create = function() {
            require(["jqScrollbar"], function() {
                t.destroy();
                if (t.scrollEvent) {
                    t.scrollOption.callbacks.onScroll = function() {
                        t.scrollEvent(t)
                    }
                }
                if (t.bottomEvent) {
                    t.scrollOption.callbacks.onTotalScroll = function() {
                        t.bottomEvent(t)
                    }
                }
                if (t.topEvent) {
                    t.scrollOption.callbacks.onTotalScrollBack = function() {
                        t.topEvent(t)
                    }
                }
                if (t.xScroll) {
                    t.scrollOption.horizontalScroll = t.xScroll
                }
                $(t.container).mCustomScrollbar(t.scrollOption);
                if (t.callback) {
                    t.callback(t)
                }
            })
        };
        t.destroy = function() {
            $(t.container).mCustomScrollbar("destroy")
        };
        t.disable = function() {
            $(t.container).mCustomScrollbar("disable")
        };
        t.position = function(e) {
            $(t.container).mCustomScrollbar("scrollTo", e)
        };
        t.top = function() {
            $(t.container).mCustomScrollbar("scrollTo", "top")
        };
        t.bottom = function() {
            $(t.container).mCustomScrollbar("scrollTo", "bottom")
        };
        t.create();
        return t
    };
    base.grid = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.table = null;
        t.ajaxType = e.ajaxType ? e.ajaxType : "get";
        t.header = null;
        t.body = null;
        t.footer = null;
        t.params = {};
        t.columns = null;
        t.gridOption = e.gridOption ? e.gridOption : null;
        t.pagination = e.pagination ? e.pagination : true;
        t.paginationContainer = null;
        t.paginationNumber = 5;
        t.url = e.url ? e.url : null;
        t.data = e.data ? e.data : null;
        t.pageSize = e.pageSize ? e.pageSize : 10;
        t.pageNumber = 1;
        t.callback = e.callback ? e.callback : null;
        t.total = 0;
        t.pageCount = 0;
        t.pageItemOption = {
            first: {
                type: "first",
                title: "首页",
                number: 1,
                context: "<i class='fa fa-angle-double-left'></i>"
            },
            previous: {
                type: "previous",
                title: "上一页",
                number: t.pageNumber - 1,
                context: "<i class='fa fa-angle-left'></i>"
            },
            moreLeft: {
                type: "moreLeft",
                context: "..."
            },
            moreRight: {
                type: "moreRight",
                context: "..."
            },
            next: {
                type: "next",
                number: t.pageNumber - 1,
                title: "下一页",
                context: "<i class='fa fa-angle-right'></i>"
            },
            last: {
                type: "last",
                number: t.pageCount,
                title: "末页",
                context: "<i class='fa fa-angle-double-right'></i>"
            },
            jump: {
                type: "jump",
                context: "到第<input type='text' class='pageInput form-control'/>页<button style='margin-left:5px' class='btn btn-primary'>确定</button>"
            },
            page: {
                number: null,
                type: "page",
                context: null,
                cls: "fb-page-item"
            }
        };
        t.create = function() {
            if (t.container) {
                t.drawTable()
            }
            return t
        };
        t.drawTable = function() {
            if ($(t.container).children("table").length == 0) {
                t.table = document.createElement("table");
                base.setProperty(t.table, t.gridOption.grid);
                $(t.container).append(t.table)
            } else {
                t.table = $(t.container).children("table")[0];
                base.setProperty(t.table, t.gridOption.grid)
            }
            t.drawHeader();
            t.drawBody();
            t.drawFooter();
            if (t.pagination) {
                t.query({
                    isPagination: true
                })
            }
        };
        t.drawSort = function(e, a) {
            var n = "<div class='btn-group'><a class='dropdown-toggle' data-toggle='dropdown'><span>" + a.columnContext + "</span><i class='fa fa-sort-down'></i></a>" + "<ul class='dropdown-menu' role='menu'>" + "<li><a type='desc'>降序</a></li>" + "<li><a type='asc'>升序</a></li>" + "<li><a>正常</a></li>" + "</ul>";
            $(e).html(n);
            $(e).find(".dropdown-menu a").unbind("click").on("click", function() {
                switch ($(this).attr("type")) {
                    case "desc":
                        t.params.sort = a.columnName + "_desc";
                        break;
                    case "asc":
                        t.params.sort = a.columnName + "_asc";
                        break;
                    default:
                        if (t.params.sort) delete t.params.sort;
                        break
                }
                t.pageNumber = 1;
                t.query({
                    isPagination: true
                })
            })
        };
        t.drawHeader = function() {
            if ($(t.container).children("thead").length == 0) {
                if (t.gridOption) {
                    if (t.gridOption.columns && t.gridOption.columns.length > 0) {
                        t.columns = t.gridOption.columns;
                        t.header = document.createElement("thead");
                        $(t.table).append(t.header);
                        $(t.columns).each(function(e, a) {
                            var n = document.createElement("tr");
                            $(t.header).append(n);
                            $(a).each(function(e, a) {
                                var r = document.createElement("th");
                                base.setProperty(r, a);
                                if (a.sort) {
                                    t.drawSort(r, a)
                                } else {
                                    $(r).html(a.columnContext)
                                }
                                $(n).append(r)
                            })
                        })
                    }
                }
            }
        };
        t.query = function(e) {
            $(t.body).html("");
            t.params.pageSize = t.pageSize;
            t.params.pageNumber = t.pageNumber;
            if (t.url) {
                base.ajax({
                    url: t.url,
                    params: t.params,
                    type: t.ajaxType,
                    success: function(a) {
                        $(t.body).html("");
                        var n = a.data;
                        t.total = a.total;
                        $(n).each(function(e, a) {
                            var n = document.createElement("tr");
                            $(t.body).append(n);
                            $(t.columns[0]).each(function(e, r) {
                                var i = document.createElement("td");
                                if (t.gridOption.columnDefine[r.columnName]) {
                                    var o = t.gridOption.columnDefine[r.columnName];
                                    if (o.drawEvent) {
                                        o.drawEvent(a[r.columnName], i)
                                    }
                                } else {
                                    $(i).html(a[r.columnName])
                                }
                                $(n).append(i)
                            })
                        });
                        if (e) {
                            if (e.isPagination) {
                                t.drawPagination()
                            }
                        }
                        if (t.callback) {
                            t.callback()
                        }
                    },
                    beforeSend: function() {
                        $(t.body).html("<tr><td class='tb-loadContainer' style='height:200px' colspan='" + $(t.table)[0].rows.item(0).cells.length + "'></td></tr>");
                        base.loading($(t.body).find(".tb-loadContainer"))
                    }
                })
            }
        };
        t.drawBody = function() {
            $(t.table).remove("tbody");
            t.body = document.createElement("tbody");
            $(t.table).append(t.body)
        };
        t.drawFooter = function() {
            $(t.table).remove("tfoot");
            t.footer = document.createElement("tfoot");
            $(t.table).append(t.footer)
        };
        t.drawPagination = function() {
            if (!t.paginationContainer) {
                t.paginationContainer = document.createElement("ul");
                $(t.paginationContainer).addClass("fb-grid-pagination");
                $(t.container).append(t.paginationContainer)
            } else {
                $(t.paginationContainer).html("")
            }
            if (t.total % t.pageSize == 0) {
                t.pageCount = t.total / t.pageSize
            } else {
                t.pageCount = Math.floor(t.total / t.pageSize) + 1
            }
            t.drawPaginationItem()
        };
        t.setActive = function(e) {
            $(t.paginationContainer).find(".active").removeClass("active");
            $(e).addClass("active")
        };
        t.drawPaginationItem = function() {
            $(t.paginationContainer).find("li").remove();
            t.createPageItem("info");
            if (t.pageCount <= t.paginationNumber) {
                for (var e = 1; e <= t.pageCount; e++) {
                    t.createPageItem("page", e)
                }
            } else {
                if (t.pageNumber < t.paginationNumber) {
                    for (var e = 1; e <= t.paginationNumber; e++) {
                        t.createPageItem("page", e)
                    }
                    t.createPageItem("moreRight");
                    t.createPageItem("next", t.pageNumber + 1);
                    t.createPageItem("last", t.pageCount)
                } else if (t.pageNumber > t.pageCount - t.paginationNumber) {
                    t.createPageItem("first", 1);
                    t.createPageItem("previous", t.pageNumber - 1);
                    t.createPageItem("moreLeft");
                    for (var e = t.pageCount - t.paginationNumber; e <= t.pageCount; e++) {
                        t.createPageItem("page", e)
                    }
                } else {
                    t.createPageItem("first", 1);
                    t.createPageItem("previous", t.pageNumber - 1);
                    t.createPageItem("moreLeft");
                    for (var e = t.pageNumber - Math.floor(t.paginationNumber / 2); e <= t.pageNumber + Math.floor(t.paginationNumber / 2); e++) {
                        t.createPageItem("page", e)
                    }
                    t.createPageItem("moreRight");
                    t.createPageItem("next", t.pageNumber + 1);
                    t.createPageItem("last", t.pageCount)
                }
            }
            t.createPageItem("jump")
        };
        t.createPageItem = function(e, a) {
            var n = document.createElement("li");
            $(t.paginationContainer).append(n);
            $(n).attr("type", e);
            switch (e) {
                case "info":
                    $(n).html("<div style='letter-spacing:0.5px;padding:0 20px;font-size:13px;'>共" + t.pageCount + "页(" + t.total + "条记录)" + "" + "</div>");
                    break;
                case "first":
                    $(n).html("<i class='fa fa-angle-double-left'></i>");
                    $(n).attr("title", "首页");
                    $(n).on("click", function() {
                        t.pageNumber = a;
                        t.drawPaginationItem();
                        t.query()
                    });
                    break;
                case "previous":
                    $(n).html("<i class='fa fa-angle-left'></i>");
                    $(n).attr("title", "上一页");
                    $(n).on("click", function() {
                        t.pageNumber = a;
                        t.drawPaginationItem();
                        t.query()
                    });
                    break;
                case "next":
                    $(n).html("<i class='fa fa-angle-right'></i>");
                    $(n).attr("title", "下一页");
                    $(n).on("click", function() {
                        t.pageNumber = a;
                        t.drawPaginationItem();
                        t.query()
                    });
                    break;
                case "last":
                    $(n).html("<i class='fa fa-angle-double-right'></i>");
                    $(n).attr("title", "末页");
                    $(n).on("click", function() {
                        t.pageNumber = a;
                        t.drawPaginationItem();
                        t.query()
                    });
                    break;
                case "page":
                    $(n).addClass("fb-page-item");
                    $(n).html(a);
                    if (t.pageNumber == a) {
                        $(n).addClass("active")
                    }
                    $(n).on("click", function() {
                        t.pageNumber = a;
                        t.drawPaginationItem();
                        t.query()
                    });
                    break;
                case "moreLeft":
                case "moreRight":
                    $(n).html("...");
                    break;
                case "jump":
                    $(n).html("到第<input type='number' class='pageInput form-control'/>页<button style='margin-left:5px' class='btn btn-primary'>确定</button>");
                    $(n).find("button").on("click", function() {
                        var e = $(n).find("input").val();
                        if (e) {
                            if (e < 1) {
                                e = 1;
                                $(n).find("input").val(e)
                            } else if (e > t.pageCount) {
                                e = t.pageCount
                            }
                            t.pageNumber = e;
                            t.query({
                                isPagination: true
                            })
                        }
                    });
                    break
            }
        };
        t.pageTo = function(e) {
            t.pageNumber = e;
            t.drawPaginationItem();
            t.query()
        };
        t.reset = function() {
            t.pageNumber = 1;
            t.pageSize = e.pageSize ? e.pageSize : t.pageSize;
            t.params = {};
            t.query({
                isPagination: true
            })
        };
        t.search = function(e) {
            t.pageNumber = 1;
            t.pageSize = e.pageSize ? e.pageSize : t.pageSize;
            if (e) {
                t.params = e.params ? e.params : t.params
            }
            t.query({
                isPagination: true
            })
        };
        t.addRow = function(e, a) {
            var n = document.createElement("tr");
            $(t.body).append(n);
            $(e).each(function(e, t) {
                var a = document.createElement("td");
                a.html(t);
                $(n).append(a)
            });
            if (a) {
                a(t)
            }
        };
        t.deleteRow = function(e) {
            $(e).parents("tr").remove()
        };
        t.create();
        return t
    };
    base.getCR = function(e, t) {
        var a = null;
        var n = "";
        if ((typeof e).toLowerCase() == "string") {
            a = $("input[name='" + e + "']:checked");
            if (t) {
                $(a).each(function(e, t) {
                    if (e == $(a).length - 1) {
                        n += $(t).val()
                    } else {
                        n += $(t).val() + ","
                    }
                });
                return n
            } else {
                return a
            }
        } else {
            a = $("input[name='" + $(e).attr("name") + "']:checked");
            if (t) {
                $(a).each(function(e, t) {
                    if (e == $(a).length - 1) {
                        n += $(t).val()
                    } else {
                        n += $(t).val() + ","
                    }
                })
            } else {
                return a
            }
        }
    };
    base.getChecks = function(e) {
        var t = $("input[name='" + e + "']");
        var a = [];
        $(t).each(function(e, t) {
            if ($(t).is(":checked")) {
                a.push($(t).val())
            }
        });
        return a
    };
    base.setChecks = function(e, t) {
        var a = $("input[name='" + t + "']");
        $(a).each(function(e, t) {
            $(t).prop("checked", false)
        });
        $(e).each(function(e, t) {
            $(a).filter("[value='" + t + "']").prop("checked", true)
        })
    };
    base.selectAll = function(e, t, a) {
        $(e).on("click", function() {
            if ($(this).is(":checked")) {
                $(t).not(":disabled").prop("checked", true)
            } else {
                $(t).not(":disabled").prop("checked", false)
            }
            if (a) {
                a(e, t)
            }
        });
        $(t).on("click", function() {
            if ($(t).filter(":checked").length == $(t).length) {
                $(e).prop("checked", true)
            } else {
                $(e).prop("checked", false)
            }
            if (a) {
                a(e, t)
            }
        })
    };
    base.clearLastCharacter = function(e) {
        e = e.substring(0, e.length - 1);
        return e
    };
    base.formEntity = function() {
        var e = this;
        e.init = function(e, t) {
            for (var a in e) {
                var n = $(t).find("[name='" + a + "']");
                if (n.length == 0) {
                    continue
                }
                var r = n.attr("type");
                if (r) {
                    r = r.toLowerCase()
                }
                switch (r) {
                    case "checkbox":
                    case "radio":
                        base.setChecks(e[a], n.attr("name"));
                        break;
                    case "hidden":
                    case "text":
                        n.val(e[a]);
                        break;
                    default:
                        switch (n[0].tagName.toLowerCase()) {
                            case "select":
                            case "textarea":
                                n.val(e[a]);
                                break;
                            default:
                                n.text(e[a]);
                                break
                        }
                        break
                }
            }
        }
    };
    base.form = new base.formEntity;
    base.form.validateFileSize = function(e, t) {
        var a = $(e)[0];
        var n = a.files[0].fileSize ? a.files[0].fileSize : a.files[0].size;
        if (Math.ceil(n / 1024) > t) {
            return false
        } else {
            return true
        }
    };
    base.form.getFileName = function(e) {
        var t = $(e).val();
        return t.replace(/.*(\/|\\)/, "")
    };
    base.form.getFileExtname = function(e) {
        var t = $(e).val();
        var a = base.form.getFileName(e);
        return /[.]/.exec(a) ? /[^.]+$/.exec(a.toLowerCase()) : ""
    };
    base.form.validateFileExtname = function(e, t) {
        var a = base.form.getFileExtname(e);
        var n = false;
        $(t.split(",")).each(function(e, t) {
            if (t == a) {
                n = true;
                return false
            }
        });
        if (!n) {
            return false
        } else {
            return true
        }
    };
    base.form.autoForm = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.data = e.data ? e.data : null;
        t.columnSize = e.columnSize ? e.columnSize : 3;
        t.layoutType = e.layoutType ? e.layoutType : "table";
        t.layoutContainer = null;
        t.layoutContainerBody = null;
        t.layoutOption = e.layoutOption ? e.layoutOption : null;
        t.rowOption = e.rowOption ? e.rowOption : null;
        t.columnOption = e.columnOption ? e.columnOption : null;
        t.buttons = e.buttons ? e.buttons : null;
        if (!t.container) {
            return
        }
        if (!t.data || t.data.length == 0) {
            return
        }
        t.create = function() {
            if (t.layoutType == "table") {
                t.createTable()
            } else {
                t.createDivGroup()
            }
            if (t.buttons) {
                t.createButtons()
            }
            return t
        };
        t.createButtons = function() {
            var e = document.createElement("div");
            $(e).css("clear", "over");
            $(e).css("margin", "5px");
            $(e).css("float", "right");
            $(t.buttons).each(function(t, a) {
                a.container = e;
                switch (a.type) {
                    case "submit":
                        a.cls = "btn btn-info";
                        a.label = "提交";
                        a.clickEvent = function() {
                            base.form.reset($(e).parents("form"))
                        };
                        break;
                    case "reset":
                        a.cls = "btn btn-warning";
                        a.label = "重置";
                        a.clickEvent = function() {
                            base.form.reset($(e).parents("form"))
                        };
                        break
                }
                var n = base.form.button(a)
            });
            $(t.container).append(e)
        };
        t.createTable = function() {
            t.layoutContainer = document.createElement("table");
            if (t.layoutOption) {
                base.setProperty(t.layoutContainer, t.layoutOption)
            }
            $(t.container).append(t.layoutContainer);
            t.layoutContainerBody = document.createElement("tbody");
            $(t.layoutContainer).append(t.layoutContainerBody);
            var e = 0;
            var a = null;
            var n = 0;
            $(t.data).each(function(n, r) {
                var i = 1;
                if (r.columnSize) {
                    if (r.columnSize > t.columnSize) {
                        e += t.columnSize;
                        i = t.columnSize
                    } else if (r.columnSize <= 0) {
                        e++;
                        i = 1
                    } else {
                        e += r.columnSize;
                        i = r.columnSize
                    }
                } else {
                    e++
                }
                if (e > t.columnSize) {
                    e = i;
                    a = document.createElement("tr");
                    if (t.rowOption) {
                        base.setProperty(a, t.rowOption)
                    }
                    t.layoutContainerBody.append(a);
                    t.createColumn(a, r, i)
                } else if (e == 1) {
                    a = document.createElement("tr");
                    if (t.rowOption) {
                        base.setProperty(a, t.rowOption)
                    }
                    t.layoutContainerBody.append(a);
                    t.createColumn(a, r, i)
                } else {
                    t.createColumn(a, r, i)
                }
            });
            t.autoFill()
        };
        t.autoFill = function() {
            var e = t.layoutContainer.rows;
            $(e).each(function(e, a) {
                var n = a.cells;
                var r = 0;
                $(n).each(function(e, t) {
                    r += Number($(t).attr("colspan") ? $(t).attr("colspan") : 1)
                });
                if (r < t.columnSize * 2) {
                    for (var i = 0; i < t.columnSize * 2 - r; i++) {
                        if (i % 2 == 0) {
                            var o = $("<td></td>");
                            if (t.columnOption && t.columnOption.label) {
                                base.setProperty(o, t.columnOption.label)
                            }
                            $(a).append(o)
                        } else {
                            var l = $("<td></td>");
                            if (t.columnOption && t.columnOption.content) {
                                base.setProperty(l, t.columnOption.content)
                            }
                            $(a).append(l)
                        }
                    }
                }
            })
        };
        t.createColumn = function(e, a, n) {
            var r = document.createElement("td");
            if (t.columnOption && t.columnOption.label) {
                base.setProperty(r, t.columnOption.label)
            }
            $(e).append(r);
            if (a.label) {
                if (a.role) {
                    if (a.role.required) {
                        $(r).html("<span style='font-size:15px;color:red'>*</span>" + a.label)
                    } else {
                        $(r).text(a.label)
                    }
                } else {
                    $(r).text(a.label)
                }
            }
            var i = document.createElement("td");
            if (t.columnOption && t.columnOption.content) {
                base.setProperty(i, t.columnOption.content)
            }
            if (n > 1) {
                $(i).attr("colspan", n * 2 - 1)
            }
            $(e).append(i);
            a.container = i;
            base.form.element(a)
        };
        t.createElementToDivGroup = function() {};
        t.createElementToDiv = function() {};
        t.create();
        return t
    };
    base.form.filterBox = function(e) {
        var t = {};
        t.data = e.data ? e.data : null;
        t.container = e.container ? e.container : null;
        t.callback = e.callback ? e.callback : null;
        t.leftBox = null;
        t.rightBox = null;
        t.leftBoxContainer = null;
        t.rightBoxContainer = null;
        t.handlerBox = null;
        t.handlerBoxContainer = null;
        t.handlerWidth = 50;
        t.boxMinWidth = 150;
        t.shadow = e.shadow == 0 ? false : true;
        t.height = e.height ? e.height : $(t.container).height();
        t.unique = e.unique == 0 ? false : true;
        t.isTree = e.isTree == 0 ? false : true;
        t.tree = null;
        t.treeNode = null;
        t.resultData = [];
        t.url = e.url ? e.url : null;
        t.params = e.params ? e.params : null;
        t.type = e.type ? e.type : "get";
        t.create = function() {
            t.createLeftBox();
            t.createHandler();
            t.createRightBox();
            return t
        };
        t.treeContainerId = base.getRandom(1e3, 9999) + "filterBoxTree";
        t.createLeftBox = function() {
            var e = ($(t.container).width() - t.handlerWidth) / 2;
            if (e < t.boxMinWidth) {
                e = t.boxMinWidth
            }
            t.leftBox = document.createElement("div");
            $(t.leftBox).css("float", "left");
            $(t.leftBox).css("width", e);
            $(t.leftBox).css("padding", "10px");
            $(t.container).append(t.leftBox);
            t.leftBoxContainer = document.createElement("div");
            $(t.leftBoxContainer).attr("id", t.treeContainerId);
            $(t.leftBoxContainer).css("height", t.height);
            $(t.leftBoxContainer).css("overflow", "auto");
            $(t.leftBoxContainer).css("padding", "5px");
            if (t.shadow) {
                $(t.leftBoxContainer).css("box-shadow", "0 0 10px #ddd inset")
            }
            $(t.leftBoxContainer).css("border", "1px solid #ccc");
            $(t.leftBox).append(t.leftBoxContainer);
            t.createLeftItems()
        };
        t.treeClickEvent = function(e, a, n) {
            t.treeNode = n
        };
        t.createLeftItems = function() {
            $(t.leftBoxContainer).addClass("ztree");
            if (t.url) {
                base.ajax({
                    url: t.url,
                    type: t.type,
                    params: t.params,
                    success: function(e) {
                        t.tree = base.tree({
                            container: $(t.leftBoxContainer),
                            data: e,
                            setting: {
                                data: {
                                    simpleData: {
                                        enable: true
                                    }
                                },
                                callback: {
                                    onClick: t.treeClickEvent
                                }
                            }
                        })
                    }
                })
            } else {
                if (t.data && t.data.length > 0) {
                    t.tree = base.tree({
                        container: $(t.leftBoxContainer),
                        data: t.data,
                        setting: {
                            data: {
                                simpleData: {
                                    enable: true
                                }
                            },
                            callback: {
                                onClick: t.treeClickEvent
                            }
                        }
                    })
                }
            }
        };
        t.createRightBox = function() {
            var e = ($(t.container).width() - t.handlerWidth) / 2;
            if (e < t.boxMinWidth) {
                e = t.boxMinWidth
            }
            t.rightBox = document.createElement("div");
            $(t.rightBox).css("float", "left");
            $(t.rightBox).css("width", e);
            $(t.rightBox).css("padding", "10px");
            $(t.container).append(t.rightBox);
            t.rightBoxContainer = document.createElement("div");
            $(t.rightBoxContainer).css("height", t.height);
            if (t.shadow) {
                $(t.rightBoxContainer).css("box-shadow", "0 0 10px #ddd inset")
            }
            $(t.rightBoxContainer).css("overflow", "auto");
            $(t.rightBoxContainer).css("padding", "0px 5px");
            $(t.rightBoxContainer).css("border", "1px solid #ccc");
            $(t.rightBox).append(t.rightBoxContainer)
        };
        t.createHandler = function() {
            t.handlerBox = document.createElement("div");
            $(t.handlerBox).css("float", "left");
            $(t.handlerBox).css("width", t.handlerWidth);
            $(t.handlerBox).css("height", t.height + 20);
            $(t.handlerBox).css("padding", "10px 0");
            $(t.handlerBox).css("display", "table");
            $(t.handlerBox).css("text-align", "center");
            $(t.container).append(t.handlerBox);
            t.handlerBoxContainer = document.createElement("div");
            $(t.handlerBoxContainer).css("width", t.handlerWidth);
            $(t.handlerBoxContainer).css("vertical-align", "middle");
            $(t.handlerBoxContainer).css("display", "table-cell");
            base.form.button({
                container: t.handlerBoxContainer,
                icon: "fa fa-angle-right",
                iconStyle: "font-size:22px",
                style: "margin-bottom:10px",
                attr: [{
                    name: "title",
                    value: "添加"
                }],
                clickEvent: function() {
                    t.add()
                }
            });
            base.form.button({
                container: t.handlerBoxContainer,
                icon: "fa fa-angle-left",
                iconStyle: "font-size:22px",
                attr: [{
                    name: "title",
                    value: "移除"
                }],
                style: "margin-bottom:10px",
                clickEvent: function() {
                    t.remove()
                }
            });
            $(t.handlerBox).append(t.handlerBoxContainer)
        };
        t.getData = function() {
            return t.resultData
        };
        t.createResultItem = function() {
            if (!t.treeNode) {
                base.alert("请选择添加项");
                return false
            }
            if (!t.checkRepeat()) {
                var e = document.createElement("span");
                $(e).html(t.treeNode.name);
                $(e).css("cursor", "pointer");
                $(e).css("background", "#f2f2f2");
                $(e).css("padding", "5px 15px");
                $(e).css("border", "1px solid #ddd");
                $(e).css("margin", "5px 5px 5px 0");
                $(e).css("float", "left");
                $(e).attr("treeId", t.treeNode.id);
                $(e).on("click", function() {
                    $(t.rightBoxContainer).children().css("background", "#f2f2f2");
                    $(t.rightBoxContainer).children().css("border", "1px solid #ddd");
                    $(t.rightBoxContainer).children().removeClass("active");
                    $(this).addClass("active");
                    $(this).css("background", "#c9f2fe");
                    $(this).css("border", "1px solid #63c9e7")
                });
                $(e).on("mouseover", function() {});
                $(e).on("mouseout", function() {});
                $(t.rightBoxContainer).append(e);
                t.resultData.push(t.treeNode)
            } else {
                base.alert("不能重复添加“<span style='padding:0 5px;color:#00a7ed'>" + t.treeNode.name + "</span>”！")
            }
        };
        t.checkRepeat = function() {
            var e = false;
            $(t.resultData).each(function(a, n) {
                if (t.treeNode.id == n.id) {
                    e = true;
                    return false
                }
            });
            return e
        };
        t.deleteNodeData = function(e) {
            var a = $(e).attr("treeId");
            $(t.resultData).each(function(e, n) {
                if (a == n.id) {
                    t.resultData.splice(e, 1);
                    return false
                }
            })
        };
        t.add = function() {
            t.createResultItem()
        };
        t.remove = function() {
            var e = $(t.rightBoxContainer).children(".active");
            if (e.length == 0) {
                base.alert("请选择删除项");
                return false
            }
            t.deleteNodeData(e);
            e.remove()
        };
        t.create();
        return t
    };
    base.form.element = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.type = e.type ? e.type : "text";
        t.name = e.name ? e.name : null;
        t.id = e.id ? e.id : null;
        t.role = e.role ? e.role : null;
        t.readonly = e.readonly == true ? true : false;
        t.disabled = e.disabled == true ? true : false;
        t.data = e ? e : null;
        t.create = function() {
            t.createElement();
            return t
        };
        t.createElement = function(e) {
            var a = t.data;
            switch (t.type) {
                case "text":
                    t.element = document.createElement("input");
                    $(t.element).addClass("form-control");
                    base.setProperty(t.element, a);
                    $(t.element).attr("type", t.type);
                    if (a.value) {
                        $(t.element).val(a.value)
                    }
                    break;
                case "hidden":
                    t.element = document.createElement("input");
                    base.setProperty(t.element, a);
                    $(t.element).attr("type", t.type);
                    if (a.value) {
                        $(t.element).val(a.value)
                    }
                    break;
                case "file":
                    t.element = document.createElement("input");
                    base.setProperty(t.element, a);
                    $(t.element).attr("type", "file");
                    $(t.element).css("display", "none");
                    var n = base.form.button({
                        container: t.container,
                        label: a.label ? a.label : "文件",
                        attr: [{
                            name: "onclick",
                            value: "return false;"
                        }],
                        clickEvent: function() {
                            $(t.element).click();
                            return false
                        }
                    });
                    if (t.readonly) {
                        $(t.element).attr("readonly", true)
                    }
                    if (t.disabled) {
                        $(t.element).attr("disabled", true);
                        $(n.element).attr("disabled", true)
                    }
                    t.element.addEventListener("change", function() {
                        $(t.element).replaceWith("<input type='file' id='" + t.id + "' name='" + t.name + "' style='display:none;'/>")
                    });
                    break;
                case "date":
                    t.element = document.createElement("input");
                    base.setProperty(t.element, a);
                    $(t.element).attr("type", "text");
                    $(t.element).addClass("form-control");
                    $(t.element).attr("readonly", true);
                    base.form.date({
                        element: t.element,
                        isTime: a.isTime == true ? true : false,
                        dateOption: a.dateOption ? a.dateOption : null
                    });
                    if (a.value) {
                        $(t.element).val(a.value)
                    }
                    break;
                case "select":
                    t.element = document.createElement("select");
                    base.setProperty(t.element, a);
                    $(t.element).addClass("form-control");
                    var r = function(e, a) {
                        $(t.element).append("<option value='-1'>*请选择*</option>");
                        $(e).each(function(e, a) {
                            $(t.element).append("<option value='" + a.value + "'>" + a.key + "</option>");
                            if (a.selected) {
                                $(t.element).val(a.value)
                            }
                        });
                        if (a.changeEvent) {
                            $(t.element).on("change", function() {
                                a.changeEvent(t)
                            })
                        }
                    };
                    if (a.data && a.data.length > 0) {
                        r(a.data, a)
                    } else if (a.ajax) {
                        base.ajax({
                            url: a.ajax.url,
                            params: a.ajax.params ? a.ajax.params : null,
                            type: a.ajax.type ? a.ajax.type : "get",
                            success: function(e) {
                                if (e && e.length > 0) {
                                    r(e, a)
                                }
                            }
                        })
                    }
                    break;
                case "textarea":
                    t.element = document.createElement("textarea");
                    base.setProperty(t.element, a);
                    $(t.element).addClass("form-control");
                    if (a.value) {
                        $(t.element).val(a.value)
                    }
                    break;
                case "radio":
                    var r = function(e, a) {
                        var n = null;
                        if (a.role) {
                            n = " role='" + JSON.stringify(t.role).replace(/"/g, "") + "'"
                        }
                        $(e).each(function(r, i) {
                            var o = $("<input type='radio' style='margin-right:4px;' name='" + a.name + "' value='" + i.value + "'" + n + "/>");
                            $(t.container).append(o);
                            $(t.container).append(i.key);
                            base.setProperty(o, e);
                            if (i.selected) {
                                $(o).prop("checked", true)
                            }
                            if (t.readonly) {
                                $(o).attr("readonly", true)
                            }
                            if (t.disabled) {
                                $(o).attr("disabled", true)
                            }
                        });
                        if (a.clickEvent) {
                            $(container).find("input[type='radio']").on("click", function() {
                                a.clickEvent(t)
                            })
                        }
                    };
                    if (a.data && a.data.length > 0) {
                        r(a.data, a)
                    } else if (a.ajax) {
                        base.ajax({
                            url: a.ajax.url,
                            params: a.ajax.params ? a.ajax.params : null,
                            type: a.ajax.type ? a.ajax.type : "get",
                            success: function(e) {
                                if (e && e.length > 0) {
                                    r(e, a)
                                }
                            }
                        })
                    }
                    break;
                case "checkbox":
                    var r = function(e, a) {
                        var n = null;
                        if (a.role) {
                            n = " role='" + JSON.stringify(t.role).replace(/"/g, "") + "'"
                        }
                        $(e).each(function(r, i) {
                            var o = $("<input type='checkbox' style='margin-right:3px;' name='" + a.name + "' value='" + i.value + "'" + n + "/>");
                            base.setProperty(o, e);
                            $(t.container).append(o);
                            $(t.container).append("<span style='margin-right:20px;'>" + i.key + "</span>");
                            if (i.selected) {
                                $(o).prop("checked", true)
                            }
                            if (t.readonly) {
                                $(o).attr("readonly", true)
                            }
                            if (t.disabled) {
                                $(o).attr("disabled", true)
                            }
                        });
                        if (a.clickEvent) {
                            $(container).find("input[type='radio']").on("click", function() {
                                a.clickEvent(t)
                            })
                        }
                    };
                    if (a.data && a.data.length > 0) {
                        r(a.data, a)
                    } else if (a.ajax) {
                        base.ajax({
                            url: a.ajax.url,
                            params: a.ajax.params ? a.ajax.params : null,
                            type: a.ajax.type ? a.ajax.type : "get",
                            success: function(e) {
                                if (e && e.length > 0) {
                                    r(e, a)
                                }
                            }
                        })
                    }
                    break;
                case "button":
                    var i = a;
                    t.data.container = t.container;
                    base.form.button(t.data);
                    break;
                case "view":
                    $(t.container).text(a.value);
                    break
            }
            if (t.element) {
                if (t.role) {
                    $(t.element).attr("role", JSON.stringify(t.role).replace(/"/g, ""))
                }
                if (t.readonly) {
                    $(t.element).attr("readonly", true)
                }
                if (t.disabled) {
                    $(t.element).attr("disabled", true)
                }
                $(t.container).append(t.element)
            }
        };
        t.create()
    };
    base.form.fileUpload = function(e) {
        var t = {};
        t.url = e.url ? e.url : null;
        t.success = e.success ? e.success : null;
        t.error = e.error ? e.error : null;
        t.id = e.id ? e.id : null;
        t.params = e.params ? e.params : null;
        t.create = function() {
            if (!t.url || !t.id) {
                return
            }
            require(["fileUpload"], function() {
                var e = "jUploadForm" + t.id;
                var a = $("#" + e);
                if (a.length > 0) {
                    a.remove()
                }
                jQuery.ajaxFileUpload({
                    url: t.url,
                    secureuri: false,
                    fileElementId: t.id,
                    dataType: "json",
                    data: t.params,
                    success: function(e, a) {
                        if (t.success) {
                            t.success(e, a)
                        }
                        t.clear()
                    },
                    error: function(e, a, n) {
                        if (t.error) {
                            t.error(e, a, n)
                        }
                        t.clear()
                    }
                })
            })
        };
        t.clear = function() {
            var e = $(t.id);
            e.after(e.clone().val(""));
            e.remove()
        };
        t.create()
    };
    base.form.paramsToString = function(e) {
        var t = "?";
        var a = 0;
        for (var n in e) {
            if (a == 0) {
                t += n + "=" + e[n]
            } else {
                t += "&" + n + "=" + e[n]
            }
            a++
        }
        return t
    };
    base.form.download = function(e) {
        var t = {};
        t.url = e.url ? e.url : null;
        t.params = e.url ? e.params : null;
        t.download = function() {
            $.ajax({
                url: t.url + base.form.paramsToString(t.params),
                type: "post",
                data: t.params,
                dataType: "json",
                contentType: "application/json;charset=UTF-8",
                success: function(e) {}
            })
        };
        t.download();
        return t
    };
    base.form.getParams = function(e, t) {
        var a = null;
        if (t) {
            a = ""
        } else {
            a = {}
        }
        var n = {};
        n.form = e ? e : null;
        if (n.form) {
            var r = $(n.form)[0].elements;
            for (var i = 0, o = r.length; i < o; i++) {
                var l = r[i];
                var c = $(l).attr("name");
                if (!c) {
                    continue
                }
                if (l.tagName.toLowerCase() == "input") {
                    if ($(l).attr("type").toLowerCase() == "checkbox" || $(l).attr("type").toLowerCase() == "radio") {
                        if (a[c]) {
                            continue
                        } else {
                            var s = "";
                            $(n.form).find("input[name='" + c + "']").each(function(e, t) {
                                if ($(t).is(":checked")) {
                                    s += $(t).val() + ","
                                }
                            });
                            if (s != "") {
                                s = base.clearLastCharacter(s);
                                if (t) {
                                    if (a == "") {
                                        a += c + "=" + s
                                    } else {
                                        a += "&" + c + "=" + s
                                    }
                                } else {
                                    a[c] = s
                                }
                            }
                        }
                    } else if ($(l).attr("type").toLowerCase() == "button") {
                        continue
                    } else {
                        if ($(l).val()) {
                            if (t) {
                                if (a == "") {
                                    a += c + "=" + encodeURIComponent($(l).val())
                                } else {
                                    a += "&" + c + "=" + encodeURIComponent($(l).val())
                                }
                            } else {
                                a[c] = $(l).val()
                            }
                        }
                    }
                } else if (l.tagName.toLowerCase() == "select" && $(l).val() == "-1") {
                    continue
                } else if (l.tagName.toLowerCase() == "button") {
                    continue
                } else {
                    if (t) {
                        if (a == "") {
                            a += c + "=" + encodeURIComponent($(l).val())
                        } else {
                            a += "&" + c + "=" + encodeURIComponent($(l).val())
                        }
                    } else {
                        a[c] = $(l).val()
                    }
                }
            }
        }
        return a
    };
    base.form.validate = function(option) {
        var self = {};
        self.form = option.form ? option.form : null;
        self.roles = option.roles ? option.roles : null;
        self.promptType = option.promptType ? option.promptType : "follow";
        self.checkAll = option.checkAll == true ? true : false;
        self.errorMsg = [];
        self.isPass = true;
        self.tipPosition = option.tipPosition ? option.tipPosition : "bottom";
        self.passCallback = option.passCallback ? option.passCallback : null;
        self.notPassCallback = option.notPassCallback ? option.notPassCallback : null;
        self.error = function(e, t, a) {
            switch (self.promptType) {
                case "top":
                    if ($(a).attr("type")) {
                        if ($(a).attr("type").toLowerCase() == "checkbox" || $(a).attr("type").toLowerCase() == "radio") {} else {
                            $(a).addClass("errorStyle")
                        }
                    } else {
                        $(a).addClass("errorStyle")
                    }
                    break;
                case "tip":
                    if ($(a).attr("type")) {
                        if ($(a).attr("type").toLowerCase() == "checkbox" || $(a).attr("type").toLowerCase() == "radio") {
                            $(a).parent().attr("data-toggle", "tooltip");
                            $(a).parent().attr("data-placement", self.tipPosition);
                            $(a).parent().attr("data-trigger", "manual");
                            $(a).parent().attr("title", t)
                        } else {
                            $(a).attr("data-toggle", "tooltip");
                            $(a).attr("data-placement", self.tipPosition);
                            $(a).attr("data-trigger", "manual");
                            $(a).attr("title", t);
                            $(a).addClass("errorStyle")
                        }
                    } else {
                        $(a).attr("data-toggle", "tooltip");
                        $(a).attr("data-placement", self.tipPosition);
                        $(a).attr("data-trigger", "manual");
                        $(a).attr("title", t);
                        $(a).addClass("errorStyle")
                    }
                    break;
                case "follow":
                    $(a).parent().find(".ui-form-error").remove();
                    $(a).parent().append("<div class='ui-form-error' style='color:red;text-align:left;'>" + t + "</div>");
                    if ($(a).attr("type") != "checkbox" && $(a).attr("type") != "radio") {
                        $(a).addClass("errorStyle")
                    }
                    break
            }
            self.errorMsg.push(t + "<br>");
            return true
        };
        self.verify = function(e, t) {
            var a = "";
            var n = false;
            var r = t.text ? t.text : $(e).attr("name");
            if ($(e).is(":hidden")) {
                return
            }
            for (var i in t) {
                switch (i) {
                    case "required":
                        if (t[i]) {
                            switch ($(e)[0].tagName.toLowerCase()) {
                                case "select":
                                    var o = $(e).val();
                                    if (!o || o == "-1") {
                                        a = "必选项";
                                        n = self.error(t, a, e)
                                    }
                                    break;
                                case "textarea":
                                    var o = $(e).val();
                                    if (!o) {
                                        a = "必填项";
                                        n = self.error(t, a, e)
                                    }
                                    break;
                                case "input":
                                    switch ($(e).attr("type")) {
                                        case "checkbox":
                                        case "radio":
                                            if (base.getChecks($(e).attr("name")).length == 0) {
                                                a = "必选项";
                                                n = self.error(t, a, e)
                                            }
                                            break;
                                        default:
                                            var o = $(e).val();
                                            if (!o) {
                                                a = "必填项";
                                                n = self.error(t, a, e)
                                            }
                                            break
                                    }
                                    break
                            }
                        }
                        break;
                    case "int":
                    case "float":
                    case "number":
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        var l = /^\d+$/;
                        var c = "整数";
                        if (i == "float") {
                            l = /^\d+(\.\d+)?$/;
                            c = "小数"
                        } else if (i == "number") {
                            c = "数字"
                        }
                        if (isNaN(Number(o))) {
                            a = "必须是" + c;
                            n = self.error(t, a, e)
                        } else {
                            if (!l.test(o) && i != "number") {
                                a = "必须是" + c;
                                n = self.error(t, a, e)
                            } else {
                                switch ((typeof t[i]).toLowerCase()) {
                                    case "number":
                                        if (Number(o) > t[i]) {
                                            a = "数字不能大于" + t[i];
                                            n = self.error(t, a, e)
                                        }
                                        break;
                                    default:
                                        if (jQuery.isArray(t[i]) && t[i].length >= 2) {
                                            if (o < t[i][0]) {
                                                a = "不能小于" + t[i][0];
                                                n = self.error(t, a, e)
                                            } else if (o > t[i][1]) {
                                                a = "不能大于" + t[i][1];
                                                n = self.error(t, a, e)
                                            }
                                        }
                                        break
                                }
                            }
                        }
                        break;
                    case "length":
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (base.getByteLen(o) > t[i]) {
                            a = "不能超过" + t[i] + "个字符";
                            n = self.error(t, a, e)
                        }
                        break;
                    case "zhLength":
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (o.length > t[i]) {
                            a = "该输入框允许输入的最大长度为" + t[i];
                            n = self.error(t, a, e)
                        }
                        break;
                    case "identityCard":
                        a = "身份证号不正确";
                        var l = /(^\d{15}$)|(^\d{17}(\d|X)$)/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "en":
                        a = "必须是英文";
                        var l = /^[a-z]*|[A-Z]*$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "ip":
                        a = "IP地址不正确";
                        var l = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "ips_port":
                        a = "IP地址不正确";
                        var s = /^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;
                        var d = /^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        var u = false;
                        $(o.split(";")).each(function(e, t) {
                            if (!t || t == "") {
                                u = true;
                                return false
                            }
                            var a = null;
                            var n = null;
                            if (t.split(":")[0]) {
                                a = t.split(":")[0]
                            }
                            if (t.split(":")[1]) {
                                n = t.split(":")[1]
                            }
                            if (a && $.trim(a) != "") {
                                if (!s.test(a)) {
                                    u = true;
                                    return false
                                }
                            } else {
                                u = true;
                                return false
                            }
                            if (n && $.trim(n) != "") {
                                if (!d.test(n)) {
                                    u = true;
                                    return false
                                }
                            } else {
                                u = true;
                                return false
                            }
                        });
                        if (u) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "port":
                        a = "端口不正确";
                        var l = /^([0-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "money":
                        var l = /^\d+.?\d{0,2}$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (isNaN(o)) {
                            a = "格式不正确";
                            n = self.error(t, a, e)
                        } else {
                            o = Number(o);
                            if (!l.test(o)) {
                                a = "格式不正确";
                                n = self.error(t, a, e)
                            }
                        }
                        break;
                    case "mobile":
                        a = "手机号码不正确";
                        var l = /^[1][3,4,5,7,8][0-9]{9}$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "telephone":
                        a = "电话号码不正确";
                        var l = /^0\d{2,3}-?\d{7,8}$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "email":
                        a = "邮箱地址不正确";
                        var l = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "filter":
                        var l = /^\w+$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            a = "只允许字母、数字、下划线";
                            n = self.error(t, a, e)
                        }
                        break;
                    case "filterCN":
                        var l = /^[一-龥a-zA-Z0-9_]+$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            a = "不能包含特殊字符~@*#$%^&";
                            n = self.error(t, a, e)
                        }
                        break;
                    case "first":
                        var f = t[i];
                        var p = f.length;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (o.slice(0, p) != f) {
                            a = "必须以" + f + "开头";
                            n = self.error(t, a, e)
                        }
                        break;
                    case "website":
                        var m = "^[^s]+";
                        var l = new RegExp(m);
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            a = "网络地址不正确";
                            n = self.error(t, a, e)
                        }
                        break;
                    case "en_number":
                        a = "必须是英文或数字";
                        var l = /^[0-9a-zA-Z]+$/;
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "fileSize":
                        a = "文件大小不能超过" + t[i] + "kb";
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!base.form.validateFileSize($(e), Number(t[i]))) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "fileName":
                        a = "必须是" + t[i] + "的文件";
                        var o = $(e).val();
                        if (!o || o == "") {
                            return
                        }
                        if (!base.form.validateFileExtname($(e), t[i])) {
                            n = self.error(t, a, e)
                        }
                        break;
                    case "password":
                        a = "密码格式不正确，至少1个字母和数字且6-18个字符";
                        var o = $(e).val();
                        var l = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{6,18}$/;
                        if (!o || o == "") {
                            return
                        }
                        if (!l.test(o)) {
                            n = self.error(t, a, e)
                        }
                        break
                }
            }
            return n
        };
        self.init = function() {
            self.errorMsg = [];
            self.isPass = true;
            $(self.form).find(".alert").remove();
            $(self.form).find("[data-toggle='tooltip']").tooltip("destroy");
            $(self.form).find("[data-toggle='tooltip']").removeAttr("title");
            $(self.form).find("[data-toggle='tooltip']").removeAttr("data-toggle");
            $(".errorStyle").removeClass("errorStyle");
            $(".ui-form-error").remove();
            if ($("#errorStyle").length == 0) {
                $("head").append("<style id='errorStyle'>.errorStyle{border:1px solid red;}</style>")
            }
        };
        self.scan = function() {
            self.init();
            if (self.form) {
                if (self.roles) {
                    var i = 0;
                    for (var name in self.roles) {
                        var role = self.roles[name];
                        var obj = $(self.form).find("[name='" + name + "']");
                        if (role && obj.length > 0) {
                            if (self.checkAll) {
                                self.verify(obj, role)
                            } else {
                                if (self.verify(obj, role)) {
                                    break
                                }
                            }
                        }
                        i++
                    }
                } else {
                    var tmp = {};
                    if ($(self.form).length == 0) {
                        return
                    }
                    var eles = $(self.form)[0].elements;
                    for (var i = 0, j = eles.length; i < j; i++) {
                        var o = $(eles[i]);
                        var role = o.attr("role");
                        if (role) {
                            var roleData = eval("(" + role + ")");
                            var name = o.attr("name");
                            if (self.checkAll) {
                                if (tmp[name]) {
                                    continue
                                } else {
                                    self.verify(o, roleData);
                                    tmp[name] = true
                                }
                            } else {
                                if (tmp[name]) {
                                    continue
                                } else {
                                    if (self.verify(o, roleData)) {
                                        break
                                    }
                                }
                            }
                        }
                    }
                }
                if (self.errorMsg.length > 0) {
                    switch (self.promptType) {
                        case "tip":
                            if (self.checkAll) {
                                $(self.form).find("[data-toggle='tooltip']").tooltip("show")
                            } else {
                                $(self.form).find("[data-toggle='tooltip']:eq(0)").tooltip("show")
                            }
                            break;
                        case "top":
                            var alertDialog = document.createElement("div");
                            $(alertDialog).addClass("alert alert-danger");
                            $(self.form).prepend(alertDialog);
                            if (self.checkAll) {
                                $(self.errorMsg).each(function(e, t) {
                                    $(alertDialog).append(e + 1 + "." + t)
                                })
                            } else {
                                $(alertDialog).append(self.errorMsg[0])
                            }
                            break
                    }
                    self.isPass = false
                }
            } else {
                self.isPass = false
            }
            if (self.isPass) {
                if (self.passCallback) {
                    self.passCallback(self)
                }
            } else {
                if (self.notPassCallback) {
                    self.notPassCallback(self)
                }
            }
            return self.isPass
        };
        self.scan();
        return self.isPass
    };
    base.form.reset = function(e, t) {
        var a = $(e)[0].elements;
        for (var n = 0, r = a.length; n < r; n++) {
            if ($(a[n]).prop("disabled") == true) {
                continue
            } else {
                if (a[n] && a[n].tagName) {
                    var i = a[n].tagName.toLowerCase();
                    switch (i) {
                        case "select":
                            $(a[n]).find("option:first").prop("selected", "selected");
                            break;
                        case "hidden":
                            break;
                        case "checkbox":
                        case "radio":
                            $(a[n]).prop("checked", false);
                            break;
                        default:
                            $(a[n]).val("");
                            break
                    }
                }
            }
        }
        if (t) {
            t()
        }
    };
    base.form.button = function(e) {
        var t = {};
        t.label = e.label ? e.label : "确定";
        t.disabled = e.disabled ? e.disabled : false;
        t.container = e.container ? e.container : $("body");
        t.element = null;
        t.clickEvent = e.clickEvent ? e.clickEvent : null;
        t.id = e.id ? e.id : null;
        t.cls = e.cls ? e.cls : null;
        t.style = e.style ? e.style : null;
        t.icon = e.icon ? e.icon : null;
        t.iconStyle = e.iconStyle ? e.iconStyle : "";
        t.imgIcon = e.imgIcon ? e.imgIcon : null;
        t.attr = e.attr ? e.attr : null;
        t.iconPosition = e.iconPosition ? e.iconPosition : "first";
        t.create = function() {
            t.element = document.createElement("button");
            if (t.cls) {
                $(t.element).addClass(e.cls.replace(/,/g, " "))
            } else {
                $(t.element).addClass("btn btn-primary")
            }
            if (t.style) {
                $(t.element).attr("style", e.style.replace(/,/g, ";"))
            }
            if (t.attr) {
                $(t.attr).each(function(e, a) {
                    $(t.element).attr(a.name, a.value)
                })
            }
            if (t.id) {
                $(t.element).attr("id", t.id)
            }
            if (t.disabled) {
                $(t.element).addClass("disabled")
            } else {
                if (t.clickEvent) {
                    $(t.element).on("click", function() {
                        t.clickEvent(t)
                    })
                }
            }
            if (t.label) {
                $(t.element).append("<span>" + t.label + "</span>")
            }
            if (t.icon) {
                if (t.iconStyle) {
                    switch (t.iconPosition) {
                        case "last":
                            $(t.element).append("<i class='" + t.icon + "' style='" + t.iconStyle + "'></i>");
                            break;
                        default:
                            $(t.element).prepend("<i class='" + t.icon + "' style='" + t.iconStyle + "'></i>");
                            break
                    }
                } else {
                    switch (t.iconPosition) {
                        case "last":
                            $(t.element).append("<i class='" + t.icon + "'></i>");
                            break;
                        default:
                            $(t.element).prepend("<i class='" + t.icon + "'></i>");
                            break
                    }
                }
            }
            if (t.imgIcon) {
                $(t.element).html("<img src='" + t.imgIcon + "' style='border:0'/>")
            }
            $(t.element).attr("onclick", "return false;");
            $(t.container).append(t.element)
        };
        t.create();
        return t
    };
    base.form.date = function(e) {
        var t = {};
        t.dateOption = e.dateOption ? e.dateOption : {};
        t.element = e.element ? e.element : null;
        if (e.type) {
            t.dateOption.type = e.type ? e.type : null
        }
        if (e.dateOption && e.dateOption.type) {
            t.dateOption.type = e.dateOption.type ? e.dateOption.type : null
        }
        if (e.range) {
            t.dateOption.range = "~"
        }
        if (e.dateOption && e.dateOption.range) {
            t.dateOption.range = "~"
        }
        t.theme = "#01a9c2";
        if (e.theme) {
            switch (e.theme) {
                case "weilan":
                    t.theme = "#029dd0";
                    break;
                case "molv":
                    t.theme = "#03bf4e";
                    break;
                case "red":
                    t.theme = "#f60505";
                    break;
                case "orange":
                    t.theme = "#fda917";
                    break;
                default:
                    t.theme = e.theme;
                    break
            }
        }
        t.dateOption.theme = t.theme;
        if (e.isTime) {
            t.dateOption.type = "datetime"
        }
        t.create = function() {
            if ($(t.element).length > 0) {
                var e = t.element.tagName;
                require(["date5.0"], function(e) {
                    if ($(t.element).length > 1) {
                        $(t.element).each(function() {
                            t.readonly(this);
                            t.dateOption.elem = this;
                            e.render(t.dateOption)
                        })
                    } else {
                        t.readonly($(t.element)[0]);
                        t.dateOption.elem = $(t.element)[0];
                        e.render(t.dateOption)
                    }
                })
            }
        };
        t.readonly = function(e) {
            var t = $(e)[0].tagName;
            if (t) {
                switch (t.toLowerCase()) {
                    case "input":
                    case "select":
                    case "textarea":
                        $(e).attr("readonly", true);
                        break
                }
            }
        };
        t.create()
    };
    base.form.dateRange = function(e) {
        var t = {};
        t.dateOption = e.dateOption ? e.dateOption : {
            format: "YYYY-MM-DD"
        };
        t.dataOption.language = "cn";
        t.element = e.element ? e.element : null;
        t.create = function() {
            if (!t.element) {
                return
            }
            if ($("head").find("#dateRangeCSS").length == 0) {
                $("head").append("<link id='dateRangeCSS' href='" + $.base + "/css/daterangepicker.min.css' rel='stylesheet' type='text/css'>")
            }
            require(["dateRange"], function() {
                $(t.element).dateRangePicker(t.dateOption)
            })
        };
        t.create()
    };
    base.form.autoSelect = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.data = e.data ? e.data : null;
        t.url = e.url ? e.url : null;
        t.params = e.params ? e.params : {};
        t.size = e.size ? e.size : 10;
        t.highLight = e.highLight ? e.highLight : true;
        t.autoSelectObj = null;
        t.type = e.type ? e.type : "get";
        t.ajaxSettings = e.ajaxSettings ? e.ajaxSettings : {};
        t.dropContainer = e.dropContainer ? e.dropContainer : null;
        t.clickCallback = e.clickCallback ? e.clickCallback : null;
        t.width = e.width ? e.width : "auto";
        t.create = function() {
            if (t.container) {
                require(["autoSelect"], function() {
                    if (t.data) {
                        t.autoSelectObj = $(t.container).autoSelect({
                            lookup: t.data,
                            dropContainer: t.dropContainer,
                            clickCallback: t.clickCallback,
                            width: t.width,
                            onSelect: function(e) {}
                        })
                    } else if (t.url) {
                        t.autoSelectObj = $(t.container).autoSelect({
                            serviceUrl: t.url,
                            params: t.params,
                            type: t.type,
                            dropContainer: t.dropContainer,
                            ajaxSettings: t.ajaxSettings,
                            clickCallback: t.clickCallback,
                            width: t.width,
                            lookupFilter: function(e, t, a) {},
                            onSelect: function(e) {}
                        })
                    }
                })
            }
            return t
        };
        t.disable = function() {
            t.autocompleteObj.disable()
        };
        t.create();
        return t
    };
    base.form.treeSelect = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.parentContainer = e.parentContainer ? e.parentContainer : $("body");
        t.data = e.data ? e.data : null;
        t.url = e.url ? e.url : null;
        t.params = e.params ? e.params : {};
        t.multi = e.multi ? e.multi : false;
        t.treeContainer = null;
        t.type = e.type ? e.type : "get";
        t.clickEvent = e.clickEvent ? e.clickEvent : function() {};
        t.clickCallback = e.clickCallback ? e.clickCallback : null;
        if (!t.multi) {
            t.clickEvent = function(e, a, n) {
                $(t.container).val(n.name);
                $(t.container).attr("tid", n.id);
                t.hide();
                if (t.clickCallback) {
                    t.clickCallback(e, a, n)
                }
            }
        }
        t.id = e.id ? e.id : base.getRandom(1e3, 9999);
        t.setting = {
            data: {
                simpleData: {
                    enable: true
                }
            },
            callback: {
                onClick: t.clickEvent
            }
        };
        t.create = function() {
            if ($(t.container).length > 0) {
                $(t.container).attr("readonly", true);
                $(t.container).on("click", function(e) {
                    if ($(this).hasClass("active")) {
                        return
                    }
                    t.createTree();
                    $(this).addClass("active")
                });
                $(document).on("click", function(e) {
                    var a = e.target;
                    if ($(a).is($(t.container))) {
                        return
                    }
                    if ($(a).parents("[type='treeSelect']").length > 0) {
                        return
                    }
                    if ($(a).hasClass("[type='treeSelect']").length > 0) {
                        return
                    }
                    t.hide(e)
                })
            }
        };
        t.createTree = function() {
            t.treeContainer = document.createElement("div");
            $(t.treeContainer).attr("type", "treeSelect");
            $(t.treeContainer).attr("id", t.id);
            $(t.treeContainer).css("position", "absolute");
            $(t.treeContainer).css("z-index", "10000");
            $(t.treeContainer).css("min-width", $(t.container).outerWidth());
            if (t.cls || t.style) {
                base.setProperty(t.element, e)
            } else {
                $(t.treeContainer).css("border", "1px solid #109bdc");
                $(t.treeContainer).css("background-color", "#fff");
                $(t.treeContainer).css("height", 180);
                $(t.treeContainer).css("overflow", "auto");
                $(t.treeContainer).css("box-shadow", "0 0 5px #aaa")
            }
            $(t.treeContainer).addClass("ztree");
            $(t.treeContainer).css("left", $(t.container).offset().left);
            $(t.treeContainer).css("top", $(t.container).offset().top + $(t.container).height());
            $("body").append(t.treeContainer);
            if (t.data) {
                base.tree({
                    container: $(t.treeContainer),
                    data: t.data,
                    setting: t.setting
                })
            } else {
                if (t.url) {
                    base.ajax({
                        url: t.url,
                        type: t.type,
                        params: t.params,
                        success: function(e) {
                            base.tree({
                                container: $(t.treeContainer),
                                data: e,
                                setting: t.setting
                            })
                        }
                    })
                }
            }
        };
        t.hide = function(e) {
            $(t.container).removeClass("active");
            $(t.treeContainer).remove()
        };
        t.create();
        return t
    };
    base.form.linkSelect = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.changeEvent = e.changeEvent ? e.changeEvent : null;
        t.ajax = e.ajax ? e.ajax : null;
        t.data = e.data ? e.data : null;
        t.rootId = e.rootId ? e.rootId : null;
        t.create = function() {
            t.run(t.rootId)
        };
        t.run = function(e, a) {
            if (t.data) {
                var n = t.findNode(e);
                if (n) {
                    t.createNodeSelect(n, a)
                }
            } else if (t.ajax) {
                base.ajax({
                    url: t.ajax.url ? t.ajax.url : null,
                    params: t.ajax.params ? t.ajax.params : null,
                    type: t.ajax.type ? t.ajax.type : "get",
                    success: function(e) {
                        t.createNodeSelect(e)
                    }
                })
            }
        };
        t.createNodeSelect = function(e, a) {
            var n = e;
            n.container = t.container;
            n.type = "select";
            n.changeEvent = function(a) {
                $(a.element).nextAll().remove();
                t.run(e.id, a.element);
                if (t.changeEvent) {
                    t.changeEvent(n, a)
                }
            };
            base.form.element(n)
        };
        t.findNode = function(e) {
            var a = function(t) {
                var n = t.items;
                for (var r = 0, i = n.length; r < i; r++) {
                    if (n[r].id == e) {
                        if (n[r].items && n[r].items.length > 0) {
                            return n[r]
                        } else {
                            return null
                        }
                    } else if (n[r].items) {
                        a(n[r])
                    }
                }
            };
            a(t.data)
        };
        t.create()
    };
    base.form.cakeSelect = function(e) {
        var t = {};
        t.hasFirstSelect = e.hasFirstSelect == false ? false : true;
        t.isMulti = e.isMulti == true ? true : false;
        t.itemColor = e.itemColor ? e.itemColor : "#aaa";
        t.activeItemColor = e.activeItemColor ? e.activeItemColor : "#333";
        t.data = e.data ? e.data : null;
        t.clickEvent = e.clickEvent ? e.clickEvent : null;
        t.callback = e.callback ? e.callback : null;
        t.container = null;
        t.input = e.input ? e.input : null;
        t.value = $(t.input).val() ? $(t.input).val() : null;
        t.create = function() {
            if (t.input) {
                if (t.data && t.data.length > 0) {
                    t.setValue($(t.input).val());
                    t.createBox();
                    $(t.input).on("change", function() {
                        t.change($(this).val())
                    })
                }
            }
        };
        t.createBox = function() {
            t.container = document.createElement("ul");
            $(t.container).addClass("ui-form-cakeSelect");
            $(t.input).parent().append(t.container);
            t.draw()
        };
        t.createItem = function(e, a) {
            var n = document.createElement("li");
            $(t.container).append(n);
            $(n).html(e.name);
            $(n).attr("val", e.value);
            $(n).on("click", function() {
                if (!t.isMulti) {
                    $(t.container).children("li").removeAttr("class");
                    $(t.input).val($(this).attr("val"))
                }
                if ($(this).hasClass("active")) {
                    $(this).removeAttr("class")
                } else {
                    $(this).addClass("active")
                }
                if (t.isMulti) {
                    var e = "";
                    var a = $(t.container).children(".active");
                    $(a).each(function(t, n) {
                        if (t == a.length - 1) {
                            e += $(n).attr("val")
                        } else {
                            e += $(n).attr("val") + ","
                        }
                    });
                    $(t.input).val(e)
                }
            });
            if (a) {
                $(n).addClass("active")
            }
        };
        t.change = function(e) {
            if (e) {
                t.setValue(e)
            }
            var a = $(t.container).children("li");
            $(a).removeClass("active");
            $(a).each(function(e, a) {
                var n = t.value.split(",");
                $(n).each(function(e, t) {
                    if (t == $(a).val()) {
                        $(a).addClass("active");
                        return false
                    }
                })
            })
        };
        t.draw = function(e) {
            $(t.container).html("");
            if (e) {
                t.setValue(e)
            }
            $(t.data).each(function(e, a) {
                var n = false;
                var r = t.value.split(",");
                $(r).each(function(e, t) {
                    if (t == a.value) {
                        n = true;
                        return false
                    }
                });
                t.createItem(a, n)
            })
        };
        t.changeValue = function() {};
        t.setValue = function(e) {
            if (!t.isMulti) {
                if (t.hasFirstSelect && !e) {
                    t.value = t.data[0].value
                } else {
                    t.value = e
                }
            } else {
                t.value = e
            }
            t.value = t.value.toString()
        };
        t.create();
        return t
    };
    base.form.areaSelect = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.option = e.option ? e.option : null;
        t.callback = e.callback ? e.callback : null;
        t.clsUrl = e.clsUrl ? e.clsUrl : null;
        if (e.name) {
            t.option.name = e.name
        }
        if (e.id) {
            t.option.id = e.id
        }
        t.create = function() {
            if (t.container) {
                if (t.clsUrl) {
                    $("head").append("<link rel='stylesheet' href='" + t.clsUrl + "'>")
                }
                require(["areaSelect"], function() {
                    $(t.container).pickArea(t.option);
                    if (t.callback) {
                        t.callback(t)
                    }
                })
            }
        };
        t.create();
        return t
    };
    base.echarts = function(e) {
        var t = {};
        t.container = e.container ? e.container : $("body");
        t.chartOption = e.chartOption ? e.chartOption : null;
        t.chart = null;
        t.echarts = e.echarts ? e.echarts : null;
        t.drawCallback = e.drawCallback ? e.drawCallback : null;
        t.create = function() {
            if (!t.echarts) {
                return
            }
            if (t.chartOption) {
                if (t.beforeEvent) {
                    t.beforeEvent(t)()
                }
                t.chart = t.echarts.init($(t.container)[0]);
                if (t.chartOption.length > 0) {
                    $(t.chartOption).each(function(e, a) {
                        t.chart.setOption(a)
                    })
                } else {
                    t.chart.setOption(t.chartOption)
                }
                if (t.drawCallback) {
                    t.drawCallback(t)
                }
                $(window).on("resize", function() {
                    t.chart.resize()
                })
            }
            return t
        };
        t.refresh = function(e) {
            t.chartOption = e;
            t.chart.setOption(t.chartOption)
        };
        t.create();
        return t
    };
    base.earthRollMap = function(e) {
        var t = {};
        t.rippleImg = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiANCiJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPiAgICANCiAgICA8Y2lyY2xlIGN4PSIyNSIgY3k9IjI1IiByPSI1IiAgc3Ryb2tlPSJyZ2IoNCwxOTgsMjU0KSIgbGluZWpvaW49InJvdW5kIiBzdHJva2Utd2lkdGg9IjMiIGZpbGwtb3BhY2l0eT0iMSIgZmlsbD0icmdiYSgwLDAsMCwwKSIgc3Ryb2tlLW9wYWNpdHk9IjAuMiI+DQogICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZVR5cGU9InhtbCIgIGF0dHJpYnV0ZU5hbWU9InIiIGZyb209IjAiIHRvPSIyMCIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiPjwvYW5pbWF0ZT4NCiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT0ib3BhY2l0eSIgZnJvbT0iMSIgdG89IjAiIGJlZ2luPSIwcyIgZHVyPSIxcyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIC8+DQogICAgPC9jaXJjbGU+DQo8L3N2Zz4=";
        t.container = e.container ? e.container : $("body");
        t.data = e.data ? e.data : null;
        t.mapOption = {
            backgroundColor: "#999",
            globe: {
                baseTexture: "/service/images/earth-specbetter.jpg",
                displacementScale: 0,
                environment: "#000f1a",
                shading: "color",
                realisticMaterial: {
                    roughness: .9
                },
                postEffect: {
                    enable: false,
                    bloom: {
                        enable: true,
                        bloomIntensity: .1
                    }
                },
                depthOfField: {
                    enable: true
                },
                FXAA: {
                    enable: true
                },
                viewControl: {
                    autoRotate: true,
                    distance: 170,
                    center: [0, 0, 0],
                    beta: 130,
                    alpha: 30,
                    autoRotateAfterStill: .5
                }
            },
            series: t.data
        };
        t.create = function() {
            require(["echartsGl"], function() {
                var e = base.echarts({
                    container: t.container,
                    option: t.mapOption
                })
            })
        };
        t.create()
    };
    base.geoRollMap = function(e) {
        var t = {};
        t.container = e.container ? e.container : $("body");
        t.data = e.data ? e.data : null;
        t.mapEntity = null;
        t.pointsMapEntity = null;
        t.mapName = e.mapName ? e.mapName : "world";
        t.mapOption = {
            geo3D: {
                map: t.mapName,
                shading: "color",
                regionHeight: 6,
                silent: true,
                groundPlane: {
                    show: false
                },
                light: {
                    main: {
                        intensity: 0
                    },
                    ambient: {
                        intensity: 0
                    }
                },
                viewControl: {
                    distance: 50,
                    center: [116.405285, 39.904989]
                },
                itemStyle: {
                    areaColor: "#111"
                },
                boxHeight: .5
            },
            series: t.data
        };
        t.create = function() {
            require(["echarts"], function(e) {
                base.ajax({
                    type: "get",
                    url: "/service/map/" + t.mapName + ".json",
                    success: function(a) {
                        e.registerMap(t.mapName, a);
                        require(["echartsGl"], function() {
                            t.mapEntity = base.echarts({
                                container: t.container,
                                option: [{
                                    series: [{
                                        type: "map",
                                        map: t.mapName
                                    }]
                                },
                                    t.mapOption]
                            })
                        })
                    }
                })
            })
        };
        t.create()
    };
    base.isBoolean = function(e) {
        if (typeof e.toLowerCase() == "boolean") {
            return true
        } else {
            return false
        }
    };
    base.loadPage = function(e) {
        var t = {};
        t.url = e.url ? e.url : null;
        t.container = e.container ? e.container : null;
        t.params = e.params ? e.params : null;
        t.callback = e.callback ? e.callback : null;
        t.scrolls = e.scrolls ? e.scrolls : null;
        t.load = function() {
            if (t.container && t.url) {
                base.ajax({
                    type: "get",
                    url: t.url,
                    dataType: "text",
                    params: t.params,
                    success: function(e) {
                        $(t.container).html(e);
                        if (t.callback) {
                            t.callback(t)
                        }
                        if (t.scrolls) {
                            $(t.scrolls.split(",")).each(function(e, t) {
                                if ($(t).length > 0) {
                                    base.scroll({
                                        container: $(t)
                                    })
                                }
                            })
                        }
                    },
                    beforeSend: function() {
                        base.loading($(t.container))
                    },
                    error: function() {
                        $(t.container).html("加载错误")
                    }
                })
            }
        };
        t.load()
    };
    base.require = function(e, t) {
        require([e], function() {
            if (t) {
                t()
            }
        })
    };
    base.datatables = function(e) {
        var t = {};
       console.log(e)
        t.option = e.option ? e.option : null;
        t.container = e.container ? e.container : null;
        t.grid = null;
        t.filter = e.filter ? e.filter : null;
        t.callback = e.callback ? e.callback : null;
        t.nodataIcon = e.nodataIcon ? e.nodataIcon : null;
        t.nodataString = "<span style='color:#ccc'>暂无相关数据</span>";
        if (t.nodataIcon) {
            t.nodataString = t.nodataIcon + "<br/><br/>" + t.nodataString
        }
        t.language = {
            sProcessing: "<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='margin-right:4px;font-size:20px;'></i>加载中...",
            sLengthMenu: "显示 _MENU_ 条记录",
            sZeroRecords: t.nodataString,
            sInfo: "第 _START_ 至 _END_ 条记录，共 _TOTAL_ 条",
            sInfoEmpty: "显示第 0 至 0 条记录，共 0 条",
            sInfoFiltered: "(由 _MAX_ 条记录过滤)",
            sInfoPostFix: "",
            sSearch: "搜索:",
            sUrl: "",
            sEmptyTable: t.nodataString,
            sLoadingRecords: "载入中...",
            sInfoThousands: ",",
            oPaginate: {
                sFirst: "<i style='font-size:15px;' class='fa fa-angle-double-left'></i>",
                sPrevious: "<i style='font-size:15px;' class='fa fa-angle-left'></i>",
                sNext: "<i style='font-size:15px;' class='fa fa-angle-right'></i>",
                sLast: "<i style='font-size:15px;' class='fa fa-angle-double-right'></i>"
            },
            oAria: {
                sSortAscending: ": 以升序排列此列",
                sSortDescending: ": 以降序排列此列"
            }
        };
        t.create = function() {
            if (t.container && t.option) {
                t.option.language = t.language;
                $.fn.dataTable.ext.errMode = "none";
                if (t.filter) {
                    t.option.ajax.dataFilter = t.filter
                }
                t.grid = $(t.container).DataTable(t.option)
            }
        };
        t.reload = function() {
            $(t.container).find("thead input[type='checkbox']").prop("checked", false);
            t.grid.ajax.reload()
        };
        t.addRow = function(e) {
            t.grid.row.add(e).draw(false)
        };
        t.deleteRow = function(e) {
            $(t.container).find("tbody tr").removeClass("selected");
            $(e).parents("tr").addClass("selected");
            t.grid.row(".selected").remove().draw(false)
        };
        t.destroy = function() {
            t.grid.destroy()
        };
        t.create();
        return t
    };
    base.requestTip = function(e) {
        var t = {};
        t.container = null;
        if (!e) {
            e = {}
        }
        t.width = e.width ? e.width : "auto";
        t.height = e.height ? e.height : 40;
        t.color = e.color ? e.color : "#555";
        t.bg = e.bg ? e.bg : "#f2f2f2";
        t.position = e.position ? e.position : "top";
        t.timeout = e.timeout <= 0 ? e.timeout : 15e3;
        t.waitWord = e.waitWord ? e.waitWord : "正在提交...";
        t.successWord = e.successWord ? e.successWord : "提交成功";
        t.errorWord = e.errorWord ? e.errorWord : "提交错误";
        t.create = function() {
            t.container = document.createElement("div");
            $(t.container).css("position", "absolute");
            $(t.container).css("z-index", "2000");
            $(t.container).css("padding", "0 10px");
            switch (t.position) {
                case "top":
                    $(t.container).css("top", 5);
                    break;
                case "center":
                    $(t.container).css("top", "50%");
                    $(t.container).css("bottom", "50%");
                    break
            }
            t.center();
            $(t.container).css("text-align", "center");
            $(t.container).css("border", "1px solid #aaa");
            $(t.container).css("background", t.bg);
            $(t.container).css("overflow", "auto");
            $(t.container).css("width", t.width);
            $(t.container).css("height", t.height);
            $(t.container).css("margin", "auto");
            $(t.container).css("display", "none");
            $(t.container).css("line-height", t.height - 2 + "px");
            $(t.container).css("border-radius", 5);
            $("body").append(t.container)
        };
        t.center = function() {
            var e = ($(document).width() - $(t.container).width()) / 2;
            $(t.container).css("left", e)
        };
        t.wait = function(e) {
            t.waitWord = e ? e : t.waitWord;
            if (!t.container) {
                t.create()
            }
            $(t.container).show();
            $(t.container).html("<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='color:#aaa;margin-right:4px;font-size:14px;'></i>" + t.waitWord);
            if (t.timeout > 0) {
                window.setTimeout(function() {
                    $(t.container).fadeOut(function() {
                        $(t.container).remove()
                    })
                }, t.timeout)
            }
        };
        t.success = function(e) {
            t.successWord = e ? e : t.successWord;
            if (!t.container) {
                t.create()
            }
            $(t.container).html("<i class='fa fa-check-circle' style='color:#01b617;margin-right:4px;font-size:18px;'></i>" + t.successWord);
            t.center();
            $(t.container).show();
            window.setTimeout(function() {
                $(t.container).fadeOut(function() {
                    $(t.container).remove()
                })
            }, 3e3)
        };
        t.error = function(e) {
            t.errorWord = e ? e : t.errorWord;
            if (!t.container) {
                t.create()
            }
            $(t.container).html("<i class='fa fa-times-circle' style='color:red;margin-right:4px;font-size:18px;'></i>" + t.errorWord);
            t.center();
            $(t.container).show();
            window.setTimeout(function() {
                $(t.container).fadeOut(function() {
                    $(t.container).remove()
                })
            }, 3e3)
        };
        t.remove = function() {
            $(t.container).fadeOut(function() {
                $(t.container).remove()
            })
        };
        return t
    };
    base.arrayToMap = function(e, t, a) {
        var n = {};
        n.data = e ? e : null;
        n.pid = t ? t : null;
        n.map = {};
        if (n.data && n.data.length > 0) {
            if (n.pid) {
                var r = 0;
                n.transform = function(e) {
                    var t = 0;
                    $(n.data).each(function(i, o) {
                        if (o.pid == e) {
                            n.map[o.id] = o;
                            if (e == n.pid) {
                                r++
                            }
                            t++;
                            if (a) {
                                if (t == 1 && r == 1) {
                                    n.map[o.id].active = true
                                }
                            }
                            n.transform(o.id)
                        }
                    })
                };
                n.transform(n.pid)
            }
        }
        return n.map
    };
    base.mapToArray = function(e, t) {
        var a = {};
        a.data = e ? e : null;
        a.array = [];
        a.pid = t ? t : null;
        if (a.data && a.pid) {
            a.thansform = function(e, t) {
                for (var n in a.data) {
                    var r = a.data[n];
                    if (r.pid == e) {
                        if (t) {
                            if (!t.items) {
                                t.items = []
                            }
                            t.items.push(r);
                            a.thansform(r.id, r)
                        } else {
                            a.array.push(r);
                            a.thansform(r.id, r)
                        }
                    }
                }
            };
            a.thansform(t)
        }
        return a.array
    };
    base.confirm = function(e) {
        var t = {};
        t.label = e.label ? e.label : "提示";
        t.text = e.text ? e.text : "是否删除?";
        t.confirmCallback = e.confirmCallback ? e.confirmCallback : null;
        t.cancelCallback = e.cancelCallback ? e.cancelCallback : null;
        t.width = e.width?e.width:200;
        t.height = 30;
        t.textAlign = e.textAlign?e.textAlign:"";
        t.create = function() {
            var e = base.modal({
                label: t.label,
                context: "<div style='text-align:center;font-size:13px;'>" + t.text + "</div>",
                width: t.width,
                height: t.height,
                textAlign: t.textAlign,
                contentStyle: "overflow:hidden,padding:20px 0",
                labelStyle: "font-size:14px",
                buttons: [{
                    label: "确定",
                    cls: "btn btn-info",
                    clickEvent: function() {
                        if (t.confirmCallback) {
                            t.confirmCallback()
                        }
                        e.hide()
                    }
                }, {
                    label: "取消",
                    cls: "btn btn-warning",
                    clickEvent: function() {
                        if (t.cancelCallback) {
                            t.cancelCallback()
                        }
                        e.hide()
                    }
                }]
            })
        };
        t.create();
        return t
    };
    base.tip = function(e) {
        var t = {};
        t.text = e.text ? e.text : "";
        t.label = e.label ? e.label : "提示";
        t.icon = e.icon ? e.icon : "fa fa-commenting-o";
        t.width = e.width ? e.width : 200;
        t.height = e.height ? e.height : 30;
        t.create = function() {
            var e = base.modal({
                label: "<i class='" + t.icon + "' style='margin-right:4px;font-size:20px;'></i>" + t.label,
                context: "<div style='text-align:center;font-size:13px;padding:5px;'>" + t.text + "</div>",
                width: t.width,
                height: t.height,
                contentStyle: "overflow:auto,padding:20px 0",
                labelStyle: "font-size:14px",
                buttons: [{
                    label: "关闭",
                    cls: "btn btn-info",
                    clickEvent: function() {
                        e.hide()
                    }
                }]
            })
        };
        t.create();
        return t
    };
    base.alert = function(e, t) {
        var a = {};
        a.text = e ? e : "";
        a.width = 200;
        a.height = 30;
        a.callback = t ? t : null;
        a.create = function() {
            var e = base.modal({
                label: "<i class='fa fa-exclamation-circle' style='margin-right:4px;color:red;font-size:20px;'></i>提示",
                context: "<div style='text-align:center;font-size:13px;'>" + a.text + "</div>",
                width: a.width,
                height: a.height,
                contentStyle: "overflow:hidden,padding:20px 0",
                labelStyle: "font-size:14px",
                buttons: [{
                    label: "关闭",
                    cls: "btn btn-info",
                    clickEvent: function() {
                        if (a.callback) {
                            a.callback()
                        }
                        e.hide()
                    }
                }]
            })
        };
        a.create();
        return a
    };
    base.findParentToArray = function(e, t) {
        var a = {};
        a.data = e ? e : null;
        a.id = t ? t : null;
        var n = [];
        if (a.data && a.id) {
            a.find = function(e) {
                if (a.data[e]) {
                    n.push(a.data[e]);
                    a.find(a.data[e].pid)
                }
            };
            a.find(a.id)
        }
        return n.reverse()
    };
    base.tree = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.setting = e.setting ? e.setting : null;
        t.data = e.data ? e.data : null;
        t.treeObj = null;
        t.drawCallback = e.drawCallback ? e.drawCallback : null;
        t.selectNodeId = e.selectNodeId ? e.selectNodeId : null;
        t.expandAll = e.expandAll == false ? false : true;
        t.selectNode = function(e, a) {
            $(e).each(function(e, a) {
                if (a.id == t.selectNodeId) {
                    t.treeObj.selectNode(a);
                    t.treeObj.setting.callback.onClick(null, a.tId, a);
                    return false
                } else {
                    if (a.children && a.children.length > 0) {
                        t.selectNode(a.children)
                    }
                }
            })
        };
        t.create = function() {
            $.fn.zTree.init(t.container, t.setting, t.data);
            t.treeObj = $.fn.zTree.getZTreeObj($(t.container).attr("id"));
            t.treeObj.expandAll(t.expandAll);
            if (t.drawCallback) {
                t.drawCallback(t.treeObj)
            }
            if (t.selectNodeId) {
                var e = t.treeObj.getNodeByParam("id", t.selectNodeId);
                t.treeObj.selectNode(e, true);
                t.treeObj.expandNode(e, true, false)
            }
        };
        t.create();
        return t
    };
    base.steps = function(e) {
        var t = {};
        t.data = e.data ? e.data : null;
        t.container = e.container ? e.container : null;
        t.width = 0;
        t.height = e.height ? e.height : 300;
        if ($(t.container).parents(".modal-body").length > 0) {
            t.height = $(t.container).parents(".modal-body").innerHeight() - 50
        }
        if (t.height <= 0) {
            t.height = 300
        }
        t.header = {};
        t.body = {};
        t.footer = {};
        t.buttonbar = null;
        t.animate = e.animate == false ? false : true;
        t.tipSize = e.tipSize ? e.tipSize : 30;
        t.color = e.color ? e.color : "#039bda";
        t.showNumber = e.showNumber == false ? false : true;
        t.buttons = e.buttons ? e.buttons : null;
        t.lineHeight = e.lineHeight ? e.lineHeight : 10;
        t.buttonGroupToggle = e.buttonGroupToggle ? e.buttonGroupToggle : null;
        t.headerHeight = 90;
        if (t.container) {
            t.width = $(t.container).width()
        }
        t.currentStep = e.currentStep ? e.currentStep : 0;
        if (t.currentStep > t.data.length) {
            t.currentStep = t.data.length
        }
        t.create = function() {
            $(t.container).html("");
            if (t.data && t.data.length > 0) {
                t.setHeader();
                t.setBody();
                t.setFooter()
            }
        };
        t.setHeader = function(e) {
            t.header.element = document.createElement("div");
            $(t.header.element).addClass("ui-steps-header");
            $(t.header.element).css("height", t.headerHeight);
            $(t.container).append(t.header.element);
            t.header.createStepbar = function() {
                t.header.stepbar = document.createElement("ul");
                $(t.header.stepbar).addClass("ui-steps-stepbar");
                $(t.header.element).append(t.header.stepbar);
                t.header.createItem = function(e, a) {
                    var n = document.createElement("li");
                    $(t.header.stepbar).append(n);
                    $(n).css("width", t.width / t.data.length);
                    var r = document.createElement("div");
                    $(r).attr("type", "label");
                    $(r).html(e.label);
                    $(n).append(r);
                    var i = document.createElement("div");
                    $(i).attr("type", "tip");
                    $(i).css("width", t.tipSize);
                    $(i).css("height", t.tipSize);
                    if (t.showNumber) {
                        $(i).html(a + 1)
                    }
                    $(i).css("line-height", t.tipSize + "px");
                    $(i).css("font-size", t.tipSize / 3 * 2);
                    $(n).append(i)
                };
                $(t.data).each(function(e, a) {
                    t.header.createItem(a, e)
                })
            };
            t.header.createLinebar = function() {
                t.header.linebar = document.createElement("div");
                $(t.header.linebar).addClass("ui-steps-linebar");
                $(t.header.linebar).css("width", t.width / t.data.length * (t.data.length - 1));
                $(t.header.linebar).css("margin-left", t.width / t.data.length / 2);
                $(t.header.linebar).css("margin-right", t.width / t.data.length / 2);
                $(t.header.linebar).css("height", t.lineHeight);
                $(t.header.element).append(t.header.linebar);
                $(t.header.linebar).css("top", -t.tipSize + t.lineHeight);
                t.header.line = document.createElement("div");
                $(t.header.line).addClass("ui-steps-line");
                $(t.header.linebar).append(t.header.line)
            };
            t.header.step = function(e) {
                var a = $(t.header.linebar).width() / (t.data.length - 1) * t.currentStep;
                if (t.animate) {
                    $(t.header.line).animate({
                        width: a
                    })
                } else {
                    $(t.header.line).css("width", a)
                }
                $(t.header.stepbar).find("li").removeClass("active");
                $(t.header.stepbar).find("li").slice(0, t.currentStep + 1).addClass("active")
            };
            t.header.back = function() {
                if (t.currentStep <= 0) {
                    return
                }
                t.currentStep = t.currentStep - 1;
                t.header.step(true)
            };
            t.header.forward = function() {
                if (t.currentStep == t.data.length - 1) {
                    return
                }
                t.currentStep = t.currentStep + 1;
                t.header.step(false)
            };
            t.header.createStepbar();
            t.header.createLinebar();
            t.header.step()
        };
        t.getStep = function() {
            return t.currentStep
        };
        t.getStepCount = function() {
            return t.data.length
        };
        t.toStep = function(e) {
            if (e < 0) {
                e = 0
            }
            if (e > t.data.length - 1) {
                e = t.data.length - 1
            }
            if (e == t.currentStep) {
                return
            }
            if (e < t.currentStep) {
                t.currentStep = e;
                t.header.step();
                t.body.step();
                t.footer.check()
            } else {
                t.currentStep = e;
                t.header.step();
                t.body.step();
                t.footer.check()
            }
        };
        t.setBody = function() {
            t.body.element = document.createElement("div");
            $(t.body.element).addClass("ui-steps-body");
            $(t.container).append(t.body.element);
            t.body.createCarousel = function() {
                t.body.carouselbar = document.createElement("ul");
                $(t.body.carouselbar).addClass("ui-steps-carouselbar");
                $(t.body.element).append(t.body.carouselbar);
                $(t.body.carouselbar).css("width", $(t.container).width() * t.data.length);
                $(t.data).each(function(e, a) {
                    t.body.createCarouselItem(a, e)
                })
            };
            t.body.createCarouselItem = function(e, a) {
                var n = document.createElement("li");
                $(t.body.carouselbar).append(n);
                $(n).html(e.content);
                $(n).css("width", $(t.container).width());
                $(n).css("height", t.height - t.headerHeight);
                base.scroll({
                    container: n
                });
                if (a == t.currentStep) {
                    $(n).addClass("active")
                }
                if (e.contentToggle) {
                    $(n).html($(e.contentToggle).children().clone());
                    $(e.contentToggle).remove()
                }
                if (e.contentUrl) {
                    base.loadPage({
                        container: n,
                        url: e.contentUrl,
                        callback: o.callback ? o.callback : null
                    })
                }
                if (e.content) {
                    $(n).html(e.content)
                }
                if (e.callback) {
                    e.callback(t)
                }
            };
            t.body.step = function(e) {
                var a = -t.width * t.currentStep;
                $(t.body.carouselbar).children("li").show();
                if (t.animate) {
                    $(t.body.carouselbar).animate({
                        marginLeft: a
                    }, function() {
                        $(t.body.carouselbar).children("li").removeClass("active");
                        $(t.body.carouselbar).children("li:eq(" + t.currentStep + ")").addClass("active")
                    })
                } else {
                    $(t.body.carouselbar).css("margin-left", a);
                    $(t.body.carouselbar).children("li").removeClass("active");
                    $(t.body.carouselbar).children("li:eq(" + t.currentStep + ")").addClass("active")
                }
            };
            t.body.back = function() {
                if (t.currentStep < 0) {
                    return
                }
                t.body.step(true)
            };
            t.body.forward = function() {
                if (t.currentStep == t.data.length) {
                    return
                }
                t.body.step(false)
            };
            t.body.createCarousel();
            t.body.step()
        };
        t.back = function(e) {
            if (e) {
                if (!e(t)) {
                    return
                }
            }
            t.header.back();
            t.body.back();
            t.footer.check()
        };
        t.forward = function(e) {
            if (e) {
                if (!e(t)) {
                    return
                }
            }
            t.header.forward();
            t.body.forward();
            t.footer.check()
        };
        t.setFooter = function() {
            if (t.buttonGroupToggle) {
                t.footer.element = $(t.buttonGroupToggle)
            } else {
                t.footer.element = document.createElement("div");
                $(t.footer.element).addClass("ui-steps-footer");
                $(t.container).append(t.footer.element)
            }
            t.footer.createButton = function() {
                if (t.buttons && t.buttons.length > 0) {
                    $(t.buttons).each(function(e, a) {
                        var n = null;
                        var r = a.type ? " " + a.type : "";
                        var i = a.cls ? a.cls + r : "btn btn-info" + r;
                        var o = null;
                        var l = a.icon ? a.icon : null;
                        var c = a.iconPosition ? a.iconPosition : "first";
                        switch (a.type) {
                            case "back":
                                n = a.label ? a.label : "上一步";
                                o = function(e) {
                                    var n = a.callback ? a.callback : null;
                                    t.back(n)
                                };
                                break;
                            case "forward":
                                n = a.label ? a.label : "下一步";
                                o = function(e) {
                                    var n = a.callback ? a.callback : null;
                                    t.forward(n)
                                };
                                break;
                            case "confirm":
                                n = a.label ? a.label : "确定";
                                o = function(e) {
                                    if (a.callback) {
                                        if (!a.callback(e, t)) {
                                            return
                                        }
                                    }
                                };
                                break;
                            default:
                                n = a.label ? a.label : null;
                                o = function(e) {
                                    if (a.callback) {
                                        if (!a.callback(e, t)) {
                                            return
                                        }
                                    }
                                };
                                break
                        }
                        base.form.button({
                            container: t.footer.element,
                            label: n,
                            icon: l,
                            cls: i,
                            iconPosition: c,
                            clickEvent: o
                        })
                    })
                }
            };
            t.footer.check = function(e) {
                var a = t.getStepCount();
                if (t.currentStep == 0) {
                    $(t.footer.element).find(".back").addClass("disabled");
                    $(t.footer.element).find(".back").hide();
                    $(t.footer.element).find(".forward").removeClass("disabled");
                    $(t.footer.element).find(".forward").show();
                    $(t.footer.element).find(".confirm").addClass("disabled");
                    $(t.footer.element).find(".confirm").hide()
                } else if (t.currentStep == a - 1) {
                    $(t.footer.element).find(".back").removeClass("disabled");
                    $(t.footer.element).find(".back").show();
                    $(t.footer.element).find(".forward").addClass("disabled");
                    $(t.footer.element).find(".forward").hide();
                    $(t.footer.element).find(".confirm").removeClass("disabled");
                    $(t.footer.element).find(".confirm").show()
                } else {
                    $(t.footer.element).find(".back").removeClass("disabled");
                    $(t.footer.element).find(".back").show();
                    $(t.footer.element).find(".forward").removeClass("disabled");
                    $(t.footer.element).find(".forward").show();
                    $(t.footer.element).find(".confirm").addClass("disabled");
                    $(t.footer.element).find(".confirm").hide()
                }
            };
            t.footer.createButton();
            t.footer.check()
        };
        t.create();
        return t
    };
    base.pull = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.pull = null;
        t.width = e.width ? e.width : 8;
        t.height = e.height ? e.height : 50;
        t.bg = e.bg ? e.bg : "#fff";
        t.hoverBg = e.hoverBg ? e.hoverBg : "#eee";
        t.show = e.show ? e.show : true;
        t.callback = e.callback ? e.callback : null;
        t.target = e.target ? e.target : null;
        t.animate = e.animate ? e.animate : true;
        t.color = e.color ? e.color : "#333";
        t.border = e.border ? e.border : "#aaa";
        t.pullbtn = e.pullbtn ? e.pullbtn : null;
        t.create = function() {
            t.pull = document.createElement("div");
            $(t.pull).css("float", "left");
            $(t.pull).css("width", t.width);
            $(t.pull).css("height", t.height);
            $(t.pull).css("position", "absolute");
            $(t.pull).css("text-align", "center");
            $(t.pull).css("cursor", "pointer");
            $(t.pull).css("font-size", "12px");
            $(t.pull).css("padding-top", t.height / 4 + 2);
            if (t.pullbtn) {
                $(t.pull).css("background-image", "url('" + t.pullbtn + "')");
                $(t.pull).css("background-position", "0px 0px")
            } else {
                $(t.pull).css("background-color", t.bg);
                $(t.pull).css("border", "1px solid " + t.border)
            }
            $(t.pull).css("color", t.color);
            $(t.pull).attr("type", "pull");
            t.setPosition();
            $(t.pull).hover(function() {
                if (t.pullbtn) {
                    $(this).css("background-position", "-8px 0px")
                } else {
                    $(this).css("background-color", t.hoverBg)
                }
            }, function() {
                if (t.pullbtn) {
                    $(this).css("background-position", "0px 0px")
                } else {
                    $(this).css("background-color", t.bg)
                }
            });
            $(t.pull).css("z-index", "1000");
            $(t.container).parent().parent().append(t.pull);
            t.toggle();
            $(t.pull).on("click", function() {
                t.show = !t.show;
                t.toggle()
            });
            $(window).on("resize", function() {
                t.setPosition()
            })
        };
        t.setPosition = function() {
            $(t.pull).css("top", $(t.container).height() / 2 - t.height / 2 + "px");
            $(t.pull).css("left", 11 - t.width)
        };
        t.toggle = function() {
            if ($(t.container).length > 0) {
                if (t.show) {
                    $(t.pull).html("<i class='fa fa-caret-left'></i>");
                    if (t.target) {
                        if (t.animate) {
                            $(t.target).animate({
                                left: $(t.container).outerWidth()
                            })
                        } else {
                            $(t.target).css("left", $(t.container).outerWidth())
                        }
                    }
                    $(t.container).show()
                } else {
                    $(t.pull).html("<i class='fa fa-caret-right'></i>");
                    if (t.target) {
                        if (t.animate) {
                            $(t.target).animate({
                                left: 0
                            })
                        } else {
                            $(t.target).css("left", 0)
                        }
                    }
                    $(t.container).hide()
                }
                if (t.callback) {
                    t.callback(t)
                }
            }
        };
        t.create();
        return t
    };
    base.msg = function(e) {
        var t = {};
        t.content = e.content ? e.content : "";
        t.position = e.position ? e.position : "rightBottom";
        t.label = e.label ? e.label : "消息";
        t.create = function() {
            t.createHeader();
            t.crreateBody()
        };
        t.createHeader = function() {};
        t.crreateBody = function() {};
        t.create();
        return t
    };
    base.getUrlParam = function(e) {
        var t = new RegExp("(^|&)" + e + "=([^&]*)(&|$)");
        var a = window.location.search.substr(1).match(t);
        if (a != null) return unescape(a[2]);
        return null
    };
    base.cookie = function(e) {
        var t = {};
        t.path = e.path ? e.path : "/";
        t.name = e.name ? e.name : null;
        t.value = e.value ? e.value : null;
        t.days = e.days ? e.days : null;
        t.option = {};
        if (t.days) {
            t.option.expires = t.days
        }
        if (t.path) {
            t.option.path = t.path
        }
        t.create = function() {
            if (!t.name) {
                return
            }
            t.setCookie()
        };
        t.setCookie = function() {
            $.cookie(t.name, t.value, t.option)
        };
        t.getCookie = function(e) {
            $.cookie(t.name)
        };
        t.create()
    };
    base.treeTable = function(e) {
        var t = {};
        t.setting = e.setting ? e.setting : null;
        t.container = e.container ? e.container : null;
        t.create = function() {
            require(["treeTable"], function() {
                $(t.container).removeClass("treetable");
                $(t.container).treetable(t.setting)
            })
        };
        t.create()
    };
    base.getDate = function(e) {
        if (!e) {
            e = (new Date).format("yyyy-MM-dd HH:mm:ss")
        }
        var t = null;
        var a = null;
        var n = null;
        var r = 0;
        var i = 0;
        var o = 0;
        var l = null;
        var c = null;
        var s = e.split(" ");
        if (s.length > 0) {
            l = s[0].split("-");
            if (l[0]) {
                t = l[0]
            }
            if (l[1]) {
                a = l[1] - 1
            }
            if (l[2]) {
                n = l[2]
            }
        }
        if (s.length == 2) {
            c = s[1].split(":");
            if (c[0]) {
                r = c[0]
            }
            if (c[1]) {
                i = c[1]
            }
            if (c[2]) {
                o = c[2]
            }
        }
        return new Date(t, a, n, r, i, o)
    };
    base.xmlHttpRequest = function() {
        var e;
        try {
            e = new XMLHttpRequest
        } catch (t) {
            try {
                e = new ActiveXObject("Msxml2.XMLHTTP")
            } catch (t) {
                try {
                    e = new ActiveXObject("Microsoft.XMLHTTP")
                } catch (e) {}
            }
        }
        return e
    };
    base.getByteLen = function(e) {
        var t = 0;
        for (var a = 0; a < e.length; a++) {
            var n = new RegExp(/[^-ÿ]/gi);
            var r = e[a];
            if (n.test(r)) {
                t += 2
            } else {
                t += 1
            }
        }
        return t
    };
    base.dragPickBox = function(e) {
        var t = {};
        t.items = e.items ? e.items : null;
        t.boxes = e.boxes ? e.boxes : null;
        t.mouseX = 0;
        t.mouseY = 0;
        t.name = "dragPick";
        t.dragElement = null;
        t.factor = base.getRandom(1e3, 9999);
        t.boxRange = [];
        t.multiple = e.multiple == 1 ? true : false;
        t.actveBox = null;
        t.hasRemoveTools = e.removeTools == 0 ? false : true;
        t.removeToolsSize = e.removeToolsSize ? e.removeToolsSize : 14;
        t.paddingTop = e.paddingTop
        t.clickEvent = e.clickEvent ? e.clickEvent : null;
        t.msg = e.msg?e.msg:"暂无";
        t.destory = function() {
            $(document).unbind("mousedown");
            $(document).unbind("mouseup");
            $(document).unbind("mousemove")
        };
        t.create = function() {
            t.destory();
            t.setItems();
            t.setBoxes();
            document.body.onselectstart = function() {
                return false
            };
            t.init();
            t.setMouseMove();
            t.setMouseDown();
            t.setMouseUp()
        };
        t.setItems = function() {
            $(t.items).addClass(t.factor + t.name + "Item");
            base.unselect(t.items)
        };
        t.setBoxes = function() {
            $(t.boxes).addClass(t.factor + t.name + "Box");
            $(t.boxes).css("overflow", "auto");
            base.unselect(t.boxes);
            t.empty(t.boxes)
        };
        t.setMouseDown = function() {
            $(document).on("mousedown", function(e) {
                var e = e || window.event;
                var a = e.target || e.srcElement;
                var n = null;
                var r = $(a).parents("." + t.factor + t.name + "Item");
                if (r.length > 0) {
                    n = r[0]
                } else {
                    if ($(a).hasClass(t.factor + t.name + "Item")) {
                        n = a
                    }
                }
                if (n) {
                    t.createDragElement(n);
                    if (t.clickEvent) {
                        t.clickEvent(n)
                    }
                }
            })
        };
        t.setMouseMove = function() {
            $(document).on("mousemove", function(e) {
                e = e || window.event;
                t.mouseX = e.clientX;
                t.mouseY = e.clientY;
                if (t.dragElement) {
                    t.setDragPosition();
                    t.touchEvent(e)
                }
            })
        };
        t.removeDragElement = function() {
            $(t.dragElement).remove();
            t.dragElement = null
        };
        t.setMouseUp = function() {
            $(document).on("mouseup", function(e) {
                t.pick();
                t.clearActiveBox();
                t.removeDragElement()
            })
        };
        t.empty = function(e) {
            $(e).each(function(e, a) {
                var n;
                if(a.className.indexOf("dragBoxOne")){
                    n="float:left;width:100%;color:#ddd;text-align:center;font-size:" + t.removeToolsSize + "px;padding-top:91pxpx";
                }else{

                }
                n="float:left;width:100%;color:#ddd;text-align:center;font-size:" + t.removeToolsSize + "px;padding-top:" + ($(a).innerHeight() / 2 - 2 - t.removeToolsSize / 2) + "px";
                $(a).html("<div style='" + n + "'>"+t.msg+"</div>")
            })
        };
        t.pick = function() {
            if (!t.activeBox) {
                return
            }
            debugger
            var e = $(t.dragElement).attr("uid");
            if (t.checkRepeat(e)) {
                base.alert("不能重复添加");
                return
            }
            if (t.hasRemoveTools) {
                t.createRemoveTools(t.activeBox)
            }
            if (t.multiple) {
                $(t.activeBox).append("<div uid ='" + e + "' style='padding:5px;float:left;width:100%;text-align:center;'>" + $(t.dragElement).html() + "</div>")
            } else {
                var a="";//&& $(t.activeBox).find("div").text()!="请将要选看的医院从左侧拖拽至该处"
                if(t.activeBox.className.indexOf("dragBoxOne")!=-1 ){
                    var a = "float:left;width:100%;text-align:center;font-size:" + t.removeToolsSize + "px;padding-top:91px";
                }else{
                    var a = "float:left;width:100%;text-align:center;font-size:" + t.removeToolsSize + "px;padding-top:" + ($(t.activeBox).innerHeight() / 2 - 2 - t.removeToolsSize - 4 - t.removeToolsSize / 2) + "px";
                }

                $(t.activeBox).children("div").remove();
                $(t.activeBox).append("<div uid ='" + e + "' style='" + a + "'>" + $(t.dragElement).html() + "</div>")
            }
        };
        t.checkRepeat = function(e) {
            if ($(t.activeBox).children("div[uid='" + e + "']").length > 0) {
                return true
            } else {
                return false
            }
        };
        t.createRemoveTools = function(e) {
            var a = document.createElement("i");
            var m ="cursor:pointer;float:right;margin:2px"
            if(e.className.indexOf("dragBoxOne")!=-1){
                m ="cursor:pointer;float:right;margin:30px 30px 0 0"
            }
            $(a).addClass("fa fa-trash-o");
            var n = "font-size:" + t.removeToolsSize + "px"+ m;
            $(a).attr("style", n);
            $(a).attr("title", "移除");
            $(a).addClass("remove" + t.name + "Tools");
            $(e).find("." + "remove" + t.name + "Tools").remove();
            $(e).append(a);
            $(a).on("click", function() {
                t.empty(e)
            })
        };
        t.touchEvent = function(e) {
            e = e || window.event;
            $(t.boxRange).each(function(e, a) {
                var n = t.mouseX - $(t.dragElement).outerWidth() / 2;
                var r = t.mouseX + $(t.dragElement).outerWidth() / 2;
                var i = t.mouseY - $(t.dragElement).outerHeight() / 2;
                var o = t.mouseY + $(t.dragElement).outerHeight() / 2;
                var l = false;
                if (n <= a.x2 && r >= a.x1) {
                    if (i <= a.y2 && o >= a.y1) {
                        l = true;
                        t.setActiveBox(a.element);
                        return false
                    }
                }
                if (!l) {
                    t.clearActiveBox()
                }
            })
        };
        t.setActiveBox = function(e) {
            t.clearActiveBox();
            $(e).css("border", "1px solid #0000ff");
            t.activeBox = e
        };
        t.clearActiveBox = function() {
            $(t.boxes).css("border", "1px solid #ddd");
            t.activeBox = null
        };
        t.init = function(e) {
            t.boxRange = [];
            if (e) {
                t.boxes = e
            }
            $(t.boxes).each(function(e, a) {
                t.boxRange.push({
                    x1: $(a).offset().left,
                    x2: $(a).offset().left + $(a).outerWidth(),
                    y1: $(a).offset().top,
                    y2: $(a).offset().top + $(a).outerHeight(),
                    index: e,
                    element: a
                })
            });
            $(e).each(function(e, a) {
                $(a).find(".removedragPickTools").on("click", function() {
                    t.empty(a)
                })
            })
        };
        t.setDragPosition = function() {
            $(t.dragElement).css("left", t.mouseX - $(t.dragElement).outerWidth() / 2);
            $(t.dragElement).css("top", t.mouseY - $(t.dragElement).outerHeight() / 2)
        };
        t.createDragElement = function(e) {
            t.dragElement = null;
            t.dragElement = document.createElement("div");
            $(t.dragElement).css("position", "absolute");
            $(t.dragElement).css("z-index", 1e4);
            $(t.dragElement).css("padding", "5px 10px");
            base.unselect(t.dragElement);
            $(t.dragElement).css("background", "#f2f2f2");
            $(t.dragElement).css("cursor", "move");
            $(t.dragElement).css("border", "1px solid #ddd");
            $(t.dragElement).attr("uid", $(e).attr("uid"));
            $(t.dragElement).addClass(t.factor + t.name + "Drag");
            base.unselect(t.dragElement);
            $(t.dragElement).html($(e).attr("uv"));
            $("body").append(t.dragElement);
            t.setDragPosition();
            $(t.dragElement).focus()
        };
        t.getData = function() {};
        t.create();
        return t
    };
    base.unselect = function(e) {
        $(e).css("-moz-user-select", "none");
        $(e).css("-khtml-user-select", "none");
        $(e).css("user-select", "none");
        $(e).attr("unselectable", "on");
        $(e).attr("onselectstart", "return false")
    };
    base.findData = function(e, t, a) {
        var n = null;
        $(a).each(function(a, r) {
            if (r[e] == t) {
                n = r;
                return false
            }
        });
        return n
    };
    base.changeData = function(e) {
        var t = {};
        t.data = e.data ? e.data : null;
        t.key = e.key ? e.key : null;
        t.value = e.value ? e.value : null;
        t.newData = e.newData ? e.newData : null;
        $(t.data).each(function(e, a) {
            if (a[t.key] == t.value) {
                for (var n in t.newData) {
                    a[n] = t.newData[n]
                }
                return false
            }
        });
        return t.data
    };
    base.getNowDate = function() {
        var e = (new Date).Format("yyyy-MM-dd");
        return e
    };
    base.getNowTime = function() {
        var e = (new Date).Format("yyyy-MM-dd hh:mm:ss");
        return e
    };
    base.getDateByMonth = function(e, t) {
        var a = new Date;
        if (t) {
            return new Date(a.getFullYear(), a.getMonth() + e, a.getDate(), a.getHours(), a.getMinutes(), a.getSeconds()).Format("yyyy-MM-dd hh:mm:ss")
        } else {
            return new Date(a.getFullYear(), a.getMonth() + e, a.getDate()).Format("yyyy-MM-dd")
        }
    };
    base.getDateByDay = function(e, t) {
        var a = new Date;
        if (t) {
            return new Date(a.getFullYear(), a.getMonth(), a.getDate() + e, a.getHours(), a.getMinutes(), a.getSeconds()).Format("yyyy-MM-dd hh:mm:ss")
        } else {
            return new Date(a.getFullYear(), a.getMonth(), a.getDate() + e).Format("yyyy-MM-dd")
        }
    };
    base.tabs = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.addEnable = e.addEnable == true ? true : false;
        t.closeEnable = e.closeEnable == true ? true : false;
        t.data = e.data ? e.data : null;
        t.tabContainer = null;
        t.id = e.id ? e.id : base.getRandom(1e3, 9999) + "tab";
        t.create = function() {
            return t
        };
        t.init = function() {
            t.tabContainer = document.createElement("ul");
            $(t.tabContainer).attr("id", t.id);
            $(t.tabContainer).addClass("nav nav-tabs");
            $(t.data).each(function(e, a) {
                t.add(a)
            })
        };
        t.add = function(e) {
            var a = document.createElement("li");
            if (!e) {
                $(a).append("<a href='###' data-toggle='tab'><i class='fa fa-plus'></i></a>");
                t.tabContainer.append(a)
            } else {}
        };
        t.close = function() {};
        t.create()
    };
    base.calendar = function(e) {
        var t = {};
        t.calendarOption = e.calendarOption ? e.calendarOption : {};
        t.container = e.container ? e.container : null;
        t.data = e.data ? e.data : null;
        t.calendarOption.locale = "zh-cn";
        t.visEnd = e.visEnd ? e.visEnd:"day";
        t.setData = function(e) {
            t.calendarOption.events = e;
            t.data = e
        };
        if (t.data) {
            t.setData(t.data)
        }
        if (!t.calendarOption.header) {
            t.calendarOption.header = {
                left: "prev,next today",
                center: "title",
                right: "month,agendaWeek,agendaDay,listMonth"
            }
        }
        t.calendarOption.buttonIcons = true;
        t.calendarOption.defaultDate = e.date ? e.date : base.getNowDate();
        t.calendarOption.navLinks =!e.calendarOption.navLinks?e.calendarOption.navLinks:true;
        t.calendarOption.editable = true;
        t.calendarOption.eventLimit = true;
        if (e.clickEvent) {
            t.calendarOption.eventClick = function(t, a) {
                e.clickEvent(t)
            }
        }
        t.create = function() {
            if (t.container) {
                t.draw()
            }
            return t
        };
        t.draw = function() {
            require(["moment", "calendarLocale"], function(e) {
                e.createFromInputFallback = function(e) {
                    e._d = new Date(e._i)
                };
                $(t.container).fullCalendar(t.calendarOption)
            })
        };
        t.destroy = function() {
            $(t.container).fullCalendar("destroy")
        };
        t.redraw = function(e, a) {
            t.destroy();
            t.setData(e);
            t.container = a;
            t.draw()
        };
        t.findData = function(e) {
            var a = null;
            if (e) {
                $(t.data).each(function(t, n) {
                    if (n.id == e) {
                        a = n;
                        return false
                    }
                })
            }
            return a
        };
        t.create();
        return t
    };
    base.pageEntity = function() {
        var e = this;
        e.init = function(e, t) {}
    };
    base.page = new base.pageEntity;
    base.page.load = function(e) {
        var t = {};
        t.container = e.container ? e.container : $(".ui-article");
        t.url = e.url ? e.url : null;
        t.params = e.params ? e.params : null;
        t.context = e.context ? e.context : null;
        t.beforeCallback = e.beforeCallback ? e.beforeCallback : null;
        t.callback = e.callback ? e.callback : null;
        t.pageItem = null;
        t.isUnique = e.isUnique == true ? true : false;
        t.pageGroup = null;
        t.load = function() {
            if (t.container.length > 0) {
                if ($(t.container).children(".ui-page-group").length == 0) {
                    t.pageGroup = document.createElement("div");
                    $(t.pageGroup).addClass("ui-page-group");
                    $(t.container).append(t.pageGroup)
                } else {
                    t.pageGroup = $(t.container).children(".ui-page-group")[0]
                }
                t.pageItem = document.createElement("div");
                $(t.pageItem).addClass("ui-page-item");
                $(t.pageGroup).find(".ui-page-item").removeClass("active");
                $(t.pageItem).addClass("active");
                if (t.context) {
                    if (t.beforeCallback) {
                        t.beforeCallback(t)
                    }
                    if (t.isUnique) {
                        $(t.pageGroup).children().remove()
                    }
                    $(t.pageItem).attr("pageLevel", $(t.pageGroup).find(".ui-page-item").length);
                    $(t.pageItem).html(t.context);
                    $(t.pageGroup).append(t.pageItem);
                    if (t.callback) {
                        t.callback(t)
                    }
                } else if (t.url) {
                    base.ajax({
                        type: "get",
                        url: t.url,
                        dataType: "text",
                        params: t.params,
                        success: function(e) {
                            if (t.beforeCallback) {
                                t.beforeCallback(t)
                            }
                            if (t.isUnique) {
                                $(t.pageGroup).children().remove()
                            }
                            $(t.pageItem).attr("pageLevel", $(t.pageGroup).find(".ui-page-item").length);
                            $(t.pageItem).html(e);
                            $(t.pageGroup).append(t.pageItem);
                            if (t.callback) {
                                t.callback(t)
                            }
                        },
                        beforeSend: function() {
                            base.loading($(t.pageItem))
                        },
                        error: function() {
                            $(t.pageItem).html("加载错误")
                        }
                    })
                }
            }
        };
        t.load();
        return t
    };
    base.page.back = function(e) {
        var t = {};
        if (!e) {
            e = {}
        }
        t.pageItem = null;
        t.pageLevel = null;
        t.container = e.container ? e.container : $(".ui-page-group");
        t.beforeCallback = e.beforeCallback ? e.beforeCallback : null;
        t.callback = e.callback ? e.callback : null;
        t.back = function() {
            if (t.container.length > 0) {
                if (t.beforeCallback) {
                    t.beforeCallback(t)
                }
                t.pageItem = $(t.container).children(".active");
                var e = t.pageItem.prev();
                if (e.length > 0) {
                    t.pageItem.siblings().removeClass("active");
                    e.addClass("active");
                    t.pageItem.remove()
                }
                if (t.callback) {
                    t.callback(t)
                }
            }
        };
        t.back();
        return t
    };
    base.page.crumbs = function(e) {
        var t = {};
        t.create = function() {};
        t.create();
        return t
    };
    base.pillTabs = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.data = e.data ? e.data : null;
        t.tabContainer = e.tabContainer ? e.tabContainer : null;
        t.create = function() {
            if (t.data) {
                if (t.data.data && t.data.data.length > 0) {
                    if (t.tabContainer) {
                        $(t.tabContainer).html("");
                        if (!t.container) {
                            t.container = $(t.tabContainer).parent()
                        }
                    } else {
                        if (!t.container) {
                            return
                        } else {
                            t.createTab()
                        }
                    }
                    $(t.data.data).each(function(e, a) {
                        t.createTabItem(a)
                    })
                }
            }
        };
        t.createTab = function() {
            if (t.container) {
                t.tabContainer = document.createElement("div");
                base.setProperty(t.tabContainer, t.data);
                t.container.append(t.tabContainer)
            }
        };
        t.createTabItem = function(e) {
            if (!e) {
                return
            }
            var a = document.createElement("li");
            if (e.imageIcon) {
                $(a).append("<img src='" + e.imageIcon + "'/>")
            }
            if (e.icon) {
                $(a).append("<i class='" + e.icon + "'></i>")
            }
            if (e.name) {
                $(a).append("<span>" + e.name + "</span>")
            }
            if (e.active) {
                $(a).addClass("active");
                if (e.clickEvent) {
                    e.clickEvent(a, e, t)
                } else if (t.data.clickEvent) {
                    t.data.clickEvent(a, e, t)
                }
            }
            $(t.tabContainer).append(a);
            $(a).on("click", function() {
                $(t.tabContainer).children("li").removeClass("active");
                $(this).addClass("active")
            });
            if (e.clickEvent) {
                $(a).on("click", function() {
                    e.clickEvent(this, e, t)
                })
            } else if (t.data.clickEvent) {
                $(a).on("click", function() {
                    t.data.clickEvent(this, e, t)
                })
            }
        };
        t.create();
        return t
    };
    base.accordion = function(e) {
        var t = {};
        t.container = e.container ? e.container : null;
        t.accordion = null;
        t.data = e.data ? e.data : null;
        t.id = e.id ? e.id : "accordion" + base.random(1e3, 9999);
        t.name = e.name ? e.name : base.getRandomString(8);
        t.fixed = e.fixed == false ? false : true;
        t.currentIndex = 0;
        t.firstIn = e.firstIn == false ? false : true;
        t.create = function() {
            if (t.container) {
                if (t.data && t.data.length > 0) {
                    t.createAccordion()
                }
            }
        };
        t.createAccordion = function() {
            t.accordion = document.createElement("div");
            $(t.accordion).addClass("panel-group");
            $(t.container).append(t.accordion);
            e.id = t.id;
            base.setProperty(t.accordion, e);
            t.createAccordionItem()
        };
        t.createAccordionItem = function() {
            $(t.data).each(function(e, a) {
                var n = document.createElement("div");
                $(n).addClass("panel panel-default");
                $(t.accordion).append(n);
                t.createAccordionItemHeader(n, a, e);
                t.createAccordionItemBody(n, a, e)
            });
            t.setEvent()
        };
        t.createAccordionItemHeader = function(e, a, n) {
            var r = document.createElement("div");
            $(r).addClass("panel-heading");
            $(e).append(r);
            var i = document.createElement("h4");
            $(r).append(i);
            $(i).addClass("panel-title");
            var o = document.createElement("a");
            $(i).append(o);
            if (a.icon) {
                $(o).append("<i class='" + a.icon + "'></i>")
            }
            if (a.label) {
                $(o).append("<span>" + a.label + "</span>")
            }
            $(o).attr("data-toggle", "collapse");
            $(o).attr("data-parent", "#" + t.id);
            $(o).addClass("collapsed");
            $(o).attr("href", "#" + t.name + n);
            $(o).attr("aria-expanded", "false")
        };
        t.createAccordionItemBody = function(a, n, r) {
            var i = document.createElement("div");
            $(a).append(i);
            $(i).attr("index", r);
            $(i).attr("id", t.name + r);
            $(i).addClass("panel-collapse collapse");
            if (t.firstIn) {
                if (r == 0) $(i).addClass("in")
            }
            $(i).attr("aria-expanded", "false");
            var o = document.createElement("div");
            $(o).addClass("panel-body");
            $(o).attr("id", base.getRandomString(10) + r);
            $(i).append(o);
            if (n.context) {
                $(o).html(n.context)
            }
            if (n.callback) {
                n.callback(o, n, t)
            } else {
                if (e.callback) {
                    n.callback(o, t.data)
                }
            }
            if (t.fixed) {
                var l = $(t.container).innerHeight() - $(a).find(".panel-heading").outerHeight() * t.data.length;
                $(o).css("height", l);
                base.scroll({
                    container: $(o)
                })
            }
        };
        t.setEvent = function() {
            t.show();
            t.shown();
            t.hide();
            t.hidden()
        };
        t.show = function() {
            $(t.accordion).on("show.bs.collapse", function(e) {
                t.currentIndex = $(e.target).attr("index");
                if (t.showEvent) {
                    t.showEvent()
                }
            })
        };
        t.shown = function() {
            $(t.accordion).on("shown.bs.collapse", function(e) {
                if (t.shownEvent) {
                    t.shownEvent()
                }
            })
        };
        t.hide = function() {
            $(t.accordion).on("hide.bs.collapse", function(e) {
                if (t.hideEvent) {
                    t.hideEvent()
                }
            })
        };
        t.hidden = function() {
            $(t.accordion).on("hidden.bs.collapse", function(e) {
                if (t.hiddenEvent) {
                    t.hiddenEvent()
                }
            })
        };
        t.create();
        return t
    };
    return base
});